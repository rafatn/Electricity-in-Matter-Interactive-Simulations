<!doctype html>
<html lang="he" dir="rtl" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Multi-Field Model â€” Explanation + Formulas â€¢ ×”×¡×‘×¨ + × ×•×¡×—××•×ª</title>
  <meta name="color-scheme" content="light dark">

  <!-- KaTeX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>

  <style>
    :root{
      --bg0:#f4f6fb; --bg1:#eef2ff; --bg2:#ecfeff;
      --card:rgba(255,255,255,.78);
      --card2:rgba(255,255,255,.62);
      --cardSolid:#ffffff;

      --text:#0f172a;
      --muted:#64748b;
      --line:rgba(148,163,184,.35);

      --head:#0b1220;
      --link:#2563eb;

      --shadow: 0 18px 50px rgba(2,6,23,.10);
      --r:18px;

      --accent:#6366f1;
      --ok:#22c55e;
      --warn:#f59e0b;

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg0:#0b1220; --bg1:#0b1220; --bg2:#0b1220;
        --card:rgba(15,23,42,.68);
        --card2:rgba(15,23,42,.52);
        --cardSolid:#0f172a;

        --text:#e5e7eb;
        --muted:#94a3b8;
        --line:rgba(148,163,184,.18);

        --head:#f1f5f9;
        --link:#93c5fd;

        --shadow: 0 18px 50px rgba(0,0,0,.40);
      }
    }

    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:
        radial-gradient(1000px 600px at 10% 10%, var(--bg2), transparent 60%),
        radial-gradient(900px 520px at 90% 20%, var(--bg1), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg0));
    }
    a{color:var(--link);text-decoration:none}
    a:hover{text-decoration:underline}

    .wrap{max-width:1100px;margin:0 auto;padding:22px}
    .topbar{
      display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;
      margin-bottom:14px;
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      width:44px;height:44px;border-radius:14px;
      background: conic-gradient(from 220deg, var(--accent), #06b6d4, #a855f7, var(--accent));
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .logo:after{
      content:"";
      position:absolute;inset:-20px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.55), transparent 45%);
      transform:rotate(12deg);
      opacity:.8;
    }
    h1{margin:0;font-size:18px;line-height:1.2;color:var(--head)}
    .sub{margin:2px 0 0;color:var(--muted);font-size:13px}

    .pillrow{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 10px;border-radius:999px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, var(--card), var(--card2));
      box-shadow: 0 10px 25px rgba(2,6,23,.06);
      backdrop-filter: blur(8px);
    }
    .btn{
      appearance:none;border:1px solid var(--line);
      background: linear-gradient(180deg, var(--cardSolid), rgba(255,255,255,.70));
      color:var(--text);
      padding:8px 10px;border-radius:12px;
      cursor:pointer;
      box-shadow: 0 12px 26px rgba(2,6,23,.08);
      transition: transform .08s ease, border-color .2s ease;
      font-weight:700;
      user-select:none;
      font-size:13px;
    }
    .btn:hover{transform: translateY(-1px); border-color: rgba(99,102,241,.55)}
    .btn:active{transform: translateY(0px) scale(.99)}
    .btn.primary{
      border-color: rgba(99,102,241,.55);
      background: linear-gradient(180deg, rgba(99,102,241,.18), rgba(255,255,255,.70));
    }
    .btn.ghost{background:transparent;box-shadow:none}

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
      align-items:start;
    }
    .card{
      border:1px solid var(--line);
      background: linear-gradient(180deg, var(--card), var(--card2));
      border-radius: var(--r);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      overflow:hidden;
    }
    .card .hd{
      padding:14px 14px 10px;
      border-bottom:1px solid var(--line);
      display:flex;align-items:flex-start;justify-content:space-between;gap:12px;
    }
    .card .hd h2{margin:0;font-size:14px;color:var(--head)}
    .card .hd .hint{font-size:12px;color:var(--muted);margin-top:4px;max-width:70ch}
    .card .bd{padding:12px 14px 14px}

    .tag{
      display:inline-flex;align-items:center;gap:6px;
      padding:6px 9px;border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.35);
      font-size:12px;color:var(--muted);
      font-weight:700;
    }

    .cols{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 980px){
      .cols{grid-template-columns: 1fr}
    }

    .mini{font-size:12px;color:var(--muted);line-height:1.55}
    .mono{font-family:var(--mono);font-size:12px}
    .divider{height:1px;background:var(--line);margin:12px 0}

    .box{
      border:1px solid var(--line);
      border-radius:16px;
      background: rgba(255,255,255,.18);
      padding:12px;
      overflow:auto;
    }

    .sectionTitle{
      display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;
      margin:6px 0 10px;
    }

    .katex-block{overflow-x:auto; padding-bottom:2px}
    .callout{
      border:1px solid rgba(99,102,241,.35);
      background: rgba(99,102,241,.10);
      border-radius:16px;
      padding:12px;
    }
    .callout b{color:var(--head)}
    .ok{
      border-color: rgba(34,197,94,.35);
      background: rgba(34,197,94,.10);
    }
    .warn{
      border-color: rgba(245,158,11,.35);
      background: rgba(245,158,11,.10);
    }

    details{
      border:1px solid var(--line);
      border-radius:16px;
      background: rgba(255,255,255,.16);
      padding:10px 12px;
    }
    details summary{
      cursor:pointer;
      font-weight:800;
      color:var(--head);
    }
    details .mini{margin-top:8px}

    .footer{
      margin-top:14px;
      padding:12px 14px;
      border:1px dashed var(--line);
      border-radius:16px;
      color:var(--muted);
      font-size:12px;
      background: rgba(255,255,255,.18);
    }
    .rtlNote{direction:ltr; unicode-bidi: plaintext;}
    .nowrap{white-space:nowrap}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1 data-i18n="title">×”×¡×‘×¨ + × ×•×¡×—××•×ª ×œ××•×“×œ ××“×™×“×” ×¨×‘-×©×“×•×ª (4 ×¢×¨×•×¦×™ M)</h1>
          <div class="sub" data-i18n="subtitle">×“×•-×œ×©×•× ×™ â€¢ × ×™×¡×•×— ××ª××˜×™ â€¢ â€œ×‘×§×¨×‘×ª ×”××¡×¤×¨ ×”× ××“×“â€ â€¢ ×–××Ÿ / ×¤×•×¨×™×™×” / ×œ×¤×œ×¡</div>
        </div>
      </div>

      <div class="pillrow">
        <div class="pill">
          <span class="tag">ğŸŒ <span data-i18n="lang">×©×¤×”</span></span>
          <button class="btn primary" id="btnHE">×¢×‘×¨×™×ª</button>
          <button class="btn" id="btnEN">English</button>
        </div>
        <div class="pill">
          <span class="tag">ğŸŒ“ <span data-i18n="theme">×ª×¦×•×’×”</span></span>
          <button class="btn" id="btnTheme">Toggle</button>
        </div>
      </div>
    </div>

    <div class="grid">

      <section class="card">
        <div class="hd">
          <div>
            <h2 data-i18n="sec0">0) ×”×’×“×¨×•×ª: ×©×“×•×ª, ××™×§×•× ×•×–××Ÿ</h2>
            <div class="hint" data-i18n="sec0hint">
              ×›××Ÿ ×× ×¡×—×™× ××” ×–×” â€œ××¡×¤×¨ × ××“×“â€ ×›×©×™×© ×”×¨×‘×” ×××“×™×: E,H,A,W,N,h,×§×•××•×¨×“×™× ×˜×•×ª, ×–××Ÿ ×•×˜×¨× ×¡×¤×•×¨××™×.
            </div>
          </div>
          <div class="tag">ğŸ“š Definitions</div>
        </div>
        <div class="bd">
          <div class="cols">
            <div class="box">
              <div class="sectionTitle">
                <div class="tag">ğŸ§© <span data-i18n="vars">×•×§×˜×•×¨ ××©×ª× ×™×</span></div>
              </div>

              <div class="katex-block">
                \[
                \mathbf{x}=(x,y,z),\quad t\in\mathbb{R},\quad h\in\mathbb{R}
                \]
                \[
                E(\mathbf{x},t),\;H(\mathbf{x},t),\;A(\mathbf{x},t),\;W(\mathbf{x},t),\;N(\mathbf{x},t)
                \]
              </div>

              <div class="mini" data-i18n="varsText">
                \(E\) ×©×“×” ×—×©××œ×™, \(H\) ×©×“×” ××’× ×˜×™, \(A\) ×¡×‘×™×‘×”/××•×•×™×¨, \(W\) ××™×/×ª×•×•×š × ×•×–×œ×™,
                \(N\) ×¨×¢×©/×–×™×”×•×, \(h\) ×’×•×‘×” ××“×™×“×”, \(\mathbf{x}\) ××§×•×, \(t\) ×–××Ÿ.
              </div>
            </div>

            <div class="callout ok">
              <b data-i18n="keyIdeaT">×¨×¢×™×•×Ÿ ××¨×›×–×™</b>
              <div class="mini" data-i18n="keyIdea">
                â€œ×”××¡×¤×¨ ×”× ××“×“â€ ××™× ×• ××¡×¤×¨ ×˜×”×•×¨; ×”×•× ×ª×•×¦××” ×©×œ ×”×§×¨× ×” (projection) ×©×œ ×©×“×•×ª ××¨×•×‘×™-×××“×™× ×“×¨×š ×ª×’×•×‘×ª ××¢×¨×›×ª ×”××“×™×“×”/×—×™×™×©×Ÿ.
              </div>
              <div class="divider"></div>
              <div class="katex-block">
                \[
                \text{Measured} = \text{Sensor}\big(\text{Physics}(E,H,A,W,N;\mathbf{x},t),\,h,\mathbf{x}\big)+\epsilon
                \]
              </div>
            </div>
          </div>

          <div class="divider"></div>

          <details>
            <summary data-i18n="sec0more">×”×¢×¨×” ×¢×œ â€œ××™×¤×” ××“×“×ªâ€ (Place + Coordinates)</summary>
            <div class="mini" data-i18n="sec0moreText">
              ××•×ª×• ×©×“×” ×™×›×•×œ ×œ×”×™×¨××•×ª ××—×¨×ª ×‘××™×§×•× ×©×•× ×”: ×©×™× ×•×™ \(\Delta \mathbf{x}\) ××• \(\Delta h\) ×™×’×¨×•×¨ ×©×™× ×•×™ ×‘××“×™×“×”,
              ×‘×’×œ×œ ×’×¨×“×™×× ×˜×™× ××¨×—×‘×™×™× \(\nabla_{\mathbf{x}}M\) ××• ×ª×œ×•×ª ×‘×’×•×‘×”.
            </div>
            <div class="katex-block">
              \[
              M(\mathbf{x}+\Delta\mathbf{x},t)\approx M(\mathbf{x},t)+\nabla_{\mathbf{x}}M\cdot\Delta\mathbf{x}
              \]
            </div>
          </details>
        </div>
      </section>

      <section class="card">
        <div class="hd">
          <div>
            <h2 data-i18n="sec1">1) ××¨×‘×¢ ××“×™×“×•×ª: ×§×¨×™× ×” ×›×œ×œ×™×ª, ××•×¨, ×× ×¨×’×™×” ×¨×’×¢×™×ª, ×˜××¤×¨×˜×•×¨×”</h2>
            <div class="hint" data-i18n="sec1hint">
              ××’×“×™×¨×™× ×•×§×˜×•×¨ ××“×™×“×•×ª \(\mathbf{M}\) â€” ×œ×›×œ ×¢×¨×•×¥ ×™×© ×ª×œ×•×ª ×‘×©×“×•×ª ×•×‘××™×§×•×/×–××Ÿ.
            </div>
          </div>
          <div class="tag">ğŸ§¾ Measurements</div>
        </div>
        <div class="bd">
          <div class="box">
            <div class="katex-block">
              \[
              \mathbf{M}(\mathbf{x},t)=
              \begin{bmatrix}
              M_{\text{rad}}(\mathbf{x},t)\\
              M_{\text{light}}(\mathbf{x},t)\\
              M_{\text{eng}}(\mathbf{x},t)\\
              M_{\text{temp}}(\mathbf{x},t)
              \end{bmatrix}
              \]
            </div>
            <div class="mini" data-i18n="sec1note">
              ×›××Ÿ \(M_{\text{eng}}\) ×”×™× ×× ×¨×’×™×”/×”×¡×¤×§ ×¨×’×¢×™ (×œ× ××¦×˜×‘×¨), ×•-\(M_{\text{rad}}\) ×”×™× â€œ×§×¨×™× ×” ×›×œ×œ×™×ªâ€.
            </div>
          </div>

          <div class="divider"></div>

          <div class="cols">
            <div class="callout">
              <b data-i18n="map1">××™×¤×•×™ ×›×œ×œ×™</b>
              <div class="katex-block">
                \[
                \mathbf{M}(\mathbf{x},t)=\mathbf{F}\big(E,H,A,W,N,h,\mathbf{x},t\big)+\boldsymbol{\epsilon}
                \]
              </div>
              <div class="mini" data-i18n="map1t">
                \(\mathbf{F}\) ××™×™×¦×’×ª ××ª ×”×¤×™×–×™×§×” + ×”×©×™×˜×”; \(\boldsymbol{\epsilon}\) ×©××¨×™×•×ª/×¨×¢×© ×œ× ××•×¡×‘×¨.
              </div>
            </div>

            <div class="callout warn">
              <b data-i18n="map2">××” ××•×“×“×™× ×‘×¤×•×¢×œ</b>
              <div class="mini" data-i18n="map2t">
                ×”××“×™×“×” ×”×™× â€œ×ª××•× ×”â€ ×©×œ ×”××¢×¨×›×ª ×“×¨×š ×—×™×™×©×Ÿ: ×›×™×•×œ, ×¤×™×œ×˜×¨×™×, ×”×©×”×™×•×ª, ×•×¨×¢×© ×¤× ×™××™.
                ×œ×›×Ÿ ×œ×¢×™×ª×™× ×¦×¨×™×š ×˜×¨× ×¡×¤×•×¨××™× (×–××Ÿ/×¤×•×¨×™×™×”/×œ×¤×œ×¡) ×›×“×™ ×œ×”×¤×¨×™×“ ×¨×›×™×‘×™×.
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="hd">
          <div>
            <h2 data-i18n="sec2">2) â€œ×‘×§×¨×‘×ª ×”××¡×¤×¨ ×”× ××“×“â€: ×œ×™× ××¨×™×–×¦×™×” ×•×¨×’×™×©×•×™×•×ª</h2>
            <div class="hint" data-i18n="sec2hint">
              ×–×” ×”×—×œ×§ ×©××™×™×¦×¨ ××ª ×”×§×™×¨×•×‘ ×”××§×•××™: \(\Delta \mathbf{M}\approx \mathbf{J}\Delta\mathbf{u}\).
            </div>
          </div>
          <div class="tag">ğŸ§  Sensitivity</div>
        </div>
        <div class="bd">
          <div class="cols">
            <div class="box">
              <div class="sectionTitle">
                <div class="tag">ğŸ§· <span data-i18n="uvec">×•×§×˜×•×¨ ×§×œ×˜×™×</span></div>
              </div>
              <div class="katex-block">
                \[
                \mathbf{u}=
                \begin{bmatrix}
                E& H& A& W& N& h& x& y& z
                \end{bmatrix}^T
                \]
              </div>
              <div class="mini" data-i18n="uvecT">
                (××¤×©×¨ ×œ×”×•×¡×™×£ ×’× ×¨×›×™×‘×™ ×–××Ÿ ××• ×××¤×™×™× ×™ ×˜×¨× ×¡×¤×•×¨××™× ×›×ª×›×•× ×•×ª × ×•×¡×¤×•×ª).
              </div>
            </div>

            <div class="callout ok">
              <b data-i18n="jacT">×™×¢×§×•×‘×™ (Jacobian) = ××˜×¨×™×¦×ª ×¨×’×™×©×•×™×•×ª</b>
              <div class="katex-block">
                \[
                \Delta\mathbf{M}\approx \mathbf{J}\,\Delta\mathbf{u}
                \]
                \[
                \mathbf{J}_{ij}=\frac{\partial M_i}{\partial u_j}\Big|_{(\mathbf{x}_0,t_0)}
                \]
              </div>
              <div class="mini" data-i18n="jacText">
                ×›×œ ×©×•×¨×” ××™×™×¦×’×ª ×¢×¨×•×¥ ××“×™×“×”; ×›×œ ×¢××•×“×” ××™×™×¦×’×ª ××©×ª× ×” (×©×“×”/×¡×‘×™×‘×”/××™×§×•×).
                ×–×” â€œ××™ ××©×¤×™×¢ ×¢×œ ××™â€ ×‘×§×¨×‘×ª × ×§×•×“×ª ×¢×‘×•×“×”.
              </div>
            </div>
          </div>

          <div class="divider"></div>

          <div class="box">
            <div class="sectionTitle">
              <div class="tag">ğŸ“ <span data-i18n="lin">××•×“×œ ×œ×™× ××¨×™ × ×¤×•×¥</span></div>
            </div>
            <div class="katex-block">
              \[
              M_j \approx \beta_{j,0}+\beta_{j,E}E+\beta_{j,H}H+\beta_{j,A}A+\beta_{j,W}W+\beta_{j,N}N+\beta_{j,h}h+\beta_{j,x}x+\beta_{j,y}y+\beta_{j,z}z
              \]
            </div>
            <div class="mini" data-i18n="linText">
              ×‘××•×“×œ ×œ×™× ××¨×™ â€” ×”××§×“××™× \(\beta\) ×”× ×‘×“×™×•×§ ×”×¢×¨×›×™× ×©×œ \(\mathbf{J}\) (×›×œ×•××¨, ×¨×’×™×©×•×™×•×ª ×§×‘×•×¢×•×ª ××§×•××™×ª).
            </div>

            <div class="divider"></div>

            <details>
              <summary data-i18n="interSum">××™× ×˜×¨××§×¦×™×•×ª (××•××œ×¥ ×›×©×™×© ×”×©×¤×¢×•×ª ×œ×-×œ×™× ××¨×™×•×ª)</summary>
              <div class="mini" data-i18n="interText">
                ×œ×¤×¢××™× ×”×©×¤×¢×ª \(E\) ×ª×œ×•×™×” ×‘-\(H\) ××• ×‘×¨×¢×© \(N\). ××•×¡×™×¤×™× ××™×‘×¨×™ ××›×¤×œ×”:
              </div>
              <div class="katex-block">
                \[
                M_j \approx \dots +\gamma_{j,EH}(E\cdot H)+\gamma_{j,EN}(E\cdot N)+\gamma_{j,HN}(H\cdot N)+\cdots
                \]
              </div>
            </details>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="hd">
          <div>
            <h2 data-i18n="sec3">3) ×ª×—×•× ×”×–××Ÿ / ×¤×•×¨×™×™×” / ×œ×¤×œ×¡: ××” ×›×œ ×˜×¨× ×¡×¤×•×¨× â€œ××¤×¨×™×“â€</h2>
            <div class="hint" data-i18n="sec3hint">
              ×›×©××“×™×“×•×ª ×¨×’×¢×™×•×ª ×›×•×œ×œ×•×ª ×¨×¢×© ×•×ª×’×•×‘×” ×©×œ ×—×™×™×©×Ÿ â€” ×”×˜×¨× ×¡×¤×•×¨× ×¢×•×–×¨ ×œ×”×‘×—×™×Ÿ ×‘×™×Ÿ â€œ××•×ªâ€ ×œâ€×¨×¢×©×™×/×“×™× ××™×§×”â€.
            </div>
          </div>
          <div class="tag">â±ï¸ğŸ”µ Transform</div>
        </div>
        <div class="bd">
          <div class="cols">
            <div class="box">
              <div class="sectionTitle">
                <div class="tag">â±ï¸ <span data-i18n="timeDom">×ª×—×•× ×”×–××Ÿ</span></div>
              </div>
              <div class="mini" data-i18n="timeText">
                ××ª××™× ×œ×˜×¨× ×–×™×™× ×˜×™×, ×§×¤×™×¦×•×ª, ××’××•×ª ××™×˜×™×•×ª, ×•××™×¨×•×¢×™× ×‘×–××Ÿ.
                ×œ×¨×•×‘ ××¤×¨×§×™×:
              </div>
              <div class="katex-block">
                \[
                M(t)=M_{\text{trend}}(t)+M_{\text{periodic}}(t)+M_{\text{noise}}(t)
                \]
              </div>
            </div>

            <div class="box">
              <div class="sectionTitle">
                <div class="tag">ğŸ”µ <span data-i18n="fourDom">×¤×•×¨×™×™×” (Fourier)</span></div>
              </div>
              <div class="mini" data-i18n="fourText">
                ××¤×¨×§ ×œ×ª×“×¨×™×, ×˜×•×‘ ×œ×–×™×”×•×™ ×¨×¢×©×™ ×¨×©×ª (50/60Hz), ×¨×˜×™×˜×•×ª, ××• ×—×ª×™××•×ª ××—×–×•×¨×™×•×ª.
              </div>
              <div class="katex-block">
                \[
                \widehat{M}(f)=\int_{-\infty}^{\infty} M(t)\,e^{-i2\pi ft}\,dt
                \]
              </div>
            </div>
          </div>

          <div class="divider"></div>

          <div class="box">
            <div class="sectionTitle">
              <div class="tag">ğŸ§ª <span data-i18n="lapDom">×œ×¤×œ×¡ (Laplace) + ×“×™× ××™×§×ª ×—×™×™×©×Ÿ</span></div>
            </div>

            <div class="mini" data-i18n="lapText">
              ×× ×”×—×™×™×©×Ÿ ×œ× ×‘×××ª â€œ××™×™×“×™â€, ××¤×©×¨ ×œ××•×“×œ ××•×ª×• ×›×¤×™×œ×˜×¨ ××¡×“×¨ ×¨××©×•×Ÿ (×§×‘×•×¢ ×–××Ÿ \(\tau\)).
              ×–×” ×§×¨×™×˜×™ ×›×©××ª×” ×§×•×¨× ×œ×–×” â€œ×¨×’×¢×™â€ ××‘×œ ×‘×¤×•×¢×œ ×™×© ×”×©×”×™×”/×¡×™× ×•×Ÿ.
            </div>

            <div class="katex-block">
              \[
              \tau_j\frac{dM_j}{dt}+M_j=\Phi_j(E,H,A,W,N,h,\mathbf{x},t)
              \]
              \[
              M_j(s)=\frac{1}{\tau_j s+1}\,\Phi_j(s)
              \]
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="hd">
          <div>
            <h2 data-i18n="sec4">4) ×§×©×¨×™× ×¤× ×™××™×™× ×‘×™×Ÿ ×”×¢×¨×•×¦×™× (××•×¤×¦×™×•× ×œ×™, ××‘×œ ×—×–×§)</h2>
            <div class="hint" data-i18n="sec4hint">
              ×œ×¤×¢××™× ×”××“×™×“×•×ª ××©×¤×™×¢×•×ª ×–×• ×¢×œ ×–×• (×œ××©×œ ××•×¨ â†” ×˜××¤×¨×˜×•×¨×”). ×–×” ××•×“×œ ×“×•-×©×œ×‘×™: ×©×“×•×ªâ†’××“×™×“×•×ª + ××“×™×“×•×ªâ†”××“×™×“×•×ª.
            </div>
          </div>
          <div class="tag">ğŸ” Coupling</div>
        </div>
        <div class="bd">
          <div class="cols">
            <div class="callout ok">
              <b data-i18n="twoStage">××•×“×œ ×“×•-×©×œ×‘×™</b>
              <div class="katex-block">
                \[
                \mathbf{M}\approx \mathbf{B}\mathbf{z}\qquad(\text{Fields}\to\text{Measurements})
                \]
                \[
                M_{\text{light}}\approx b_0+b_1 M_{\text{temp}}+b_2 M_{\text{rad}}
                \]
              </div>
              <div class="mini" data-i18n="twoStageText">
                ×›×š ××ª×” ××¤×¨×™×“ ×‘×™×Ÿ â€œ×”×©×¤×¢×” ×¡×‘×™×‘×ª×™×ªâ€ ×œ×‘×™×Ÿ â€œ×™×—×¡×™× ×¤× ×™××™×™×â€ ×‘×™×Ÿ ×¢×¨×•×¦×™ ×”××“×™×“×”.
              </div>
            </div>

            <div class="callout">
              <b data-i18n="whyCouple">×œ××” ×–×” ×©×™××•×©×™?</b>
              <div class="mini" data-i18n="whyCoupleText">
                ×× ×œ××©×œ ×˜××¤×¨×˜×•×¨×” ×’×•×¨××ª ×œ×¢×œ×™×™×ª ×¢×•×¦××ª ××•×¨ (×›××• ×‘×ª×¦×¤×™×ª ×©×œ×š), ×›×“××™ ×œ×™×™×¦×’ ×–××ª ×™×©×™×¨×•×ª ×‘××•×“×œ,
                ×‘××§×•× â€œ×œ×”×¢××™×¡â€ ×”×›×œ ×¢×œ \(E,H,N\).
              </div>
              <div class="katex-block">
                \[
                M_{\text{temp}}\approx a_0+a_1 M_{\text{eng}}+a_2 M_{\text{rad}}
                \]
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="hd">
          <div>
            <h2 data-i18n="sec5">5) ××” ×™×•×¦× ×‘×¡×•×£: (1) ×¨×’×™×©×•×™×•×ª, (2) ×¡×¤×§×˜×¨×•×, (3) ××“×™×“×” â€œ× ×§×™×™×”â€</h2>
            <div class="hint" data-i18n="sec5hint">
              ×–×” ×”×¤×œ×˜ ×”×¤×¨×§×˜×™ ×©×××¤×©×¨ ×œ×”×‘×™×Ÿ â€œ××” ×‘×××ª ××©×¤×™×¢â€ ×¢×œ ×”××¡×¤×¨ ×”× ××“×“.
            </div>
          </div>
          <div class="tag">âœ… Outputs</div>
        </div>
        <div class="bd">
          <div class="cols">
            <div class="box">
              <div class="tag">1) <span data-i18n="out1">×•×§×˜×•×¨/×˜×‘×œ×ª ×¨×’×™×©×•×™×•×ª</span></div>
              <div class="mini" data-i18n="out1t" style="margin-top:8px">
                ×œ×›×œ ×¢×¨×•×¥, ××§×‘×œ×™× \(\frac{\partial M}{\partial E},\frac{\partial M}{\partial H},\dots\).
                ×–×” × ×•×ª×Ÿ ×“×™×¨×•×’: ××™ ×“×•××™× × ×˜×™ ×•××™ ×–× ×™×—.
              </div>
              <div class="katex-block">
                \[
                \text{Sensitivity score (example)}:\quad
                |\beta_{j,E}|,\;|\beta_{j,H}|,\;|\beta_{j,N}|,\dots
                \]
              </div>
            </div>

            <div class="box">
              <div class="tag">2) <span data-i18n="out2">× ×™×ª×•×— ×ª×“×¨×™</span></div>
              <div class="mini" data-i18n="out2t" style="margin-top:8px">
                ×œ×›×œ ×¢×¨×•×¥ \(M_j(t)\) ×‘×•×“×§×™× ××™×¤×” ×™×•×©×‘×ª ×”×× ×¨×’×™×” ×‘×ª×“×¨×™×.
              </div>
              <div class="katex-block">
                \[
                \text{BandEnergy}(f_1,f_2)=\int_{f_1}^{f_2}|\widehat{M}(f)|^2\,df
                \]
              </div>
            </div>
          </div>

          <div class="divider"></div>

          <div class="callout warn">
            <b data-i18n="cleanT">3) â€œ××“×™×“×” × ×§×™×™×”â€ (de-bias / de-noise)</b>
            <div class="mini" data-i18n="cleanText">
              ×¨×¢×™×•×Ÿ ×¤×¨×§×˜×™: ×œ×”×¡×™×¨ ×¨×›×™×‘×™ ×¨×¢×© ×•×¡×‘×™×‘×” ×™×“×•×¢×™× (×œ××©×œ \(N\) ××• ×ª×“×¨×™ ×¨×©×ª) ×›×“×™ ×œ×§×‘×œ ××•×ª ××©×•×¤×¨.
              (×–×” ××•×“×œ ×¢×–×¨ â€” ×œ× â€œ×××ª ××•×—×œ×˜×ªâ€.)
            </div>
            <div class="katex-block">
              \[
              M_{j,\text{clean}}(t)=M_j(t)-\beta_{j,N}N(t)-\sum_{k\in\mathcal{K}} c_k\sin(2\pi f_k t+\phi_k)
              \]
            </div>
          </div>
        </div>
      </section>

      <section class="footer">
        <div>Â© <span data-i18n="rights">×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª. ××™×Ÿ ×œ×©×›×¤×œ ××œ× ×‘××™×©×•×¨.</span></div>
        <div class="rtlNote">Contact: RA - Raftn4@gmail.com</div>
      </section>

    </div>
  </div>

<script>
/* =======================
   Bilingual i18n
======================= */
const I18N = {
  he: {
    title: "×”×¡×‘×¨ + × ×•×¡×—××•×ª ×œ××•×“×œ ××“×™×“×” ×¨×‘-×©×“×•×ª (4 ×¢×¨×•×¦×™ M)",
    subtitle: "×“×•-×œ×©×•× ×™ â€¢ × ×™×¡×•×— ××ª××˜×™ â€¢ â€œ×‘×§×¨×‘×ª ×”××¡×¤×¨ ×”× ××“×“â€ â€¢ ×–××Ÿ / ×¤×•×¨×™×™×” / ×œ×¤×œ×¡",
    lang: "×©×¤×”",
    theme: "×ª×¦×•×’×”",

    sec0: "0) ×”×’×“×¨×•×ª: ×©×“×•×ª, ××™×§×•× ×•×–××Ÿ",
    sec0hint: "×›××Ÿ ×× ×¡×—×™× ××” ×–×” â€œ××¡×¤×¨ × ××“×“â€ ×›×©×™×© ×”×¨×‘×” ×××“×™×: E,H,A,W,N,h,×§×•××•×¨×“×™× ×˜×•×ª, ×–××Ÿ ×•×˜×¨× ×¡×¤×•×¨××™×.",
    vars: "×•×§×˜×•×¨ ××©×ª× ×™×",
    varsText: "E ×©×“×” ×—×©××œ×™, H ×©×“×” ××’× ×˜×™, A ×¡×‘×™×‘×”/××•×•×™×¨, W ××™×/×ª×•×•×š × ×•×–×œ×™, N ×¨×¢×©/×–×™×”×•×, h ×’×•×‘×”, x ××§×•×, t ×–××Ÿ.",
    keyIdeaT: "×¨×¢×™×•×Ÿ ××¨×›×–×™",
    keyIdea: "â€œ×”××¡×¤×¨ ×”× ××“×“â€ ××™× ×• ××¡×¤×¨ ×˜×”×•×¨; ×”×•× ×ª×•×¦××” ×©×œ ×”×§×¨× ×” (projection) ×©×œ ×©×“×•×ª ××¨×•×‘×™-×××“×™× ×“×¨×š ×ª×’×•×‘×ª ××¢×¨×›×ª ×”××“×™×“×”/×—×™×™×©×Ÿ.",
    sec0more: "×”×¢×¨×” ×¢×œ â€œ××™×¤×” ××“×“×ªâ€ (Place + Coordinates)",
    sec0moreText: "××•×ª×• ×©×“×” ×™×›×•×œ ×œ×”×™×¨××•×ª ××—×¨×ª ×‘××™×§×•× ×©×•× ×”: ×©×™× ×•×™ Î”x ××• Î”h ×™×’×¨×•×¨ ×©×™× ×•×™ ×‘××“×™×“×” ×‘×’×œ×œ ×’×¨×“×™×× ×˜×™× ××¨×—×‘×™×™× âˆ‡M ××• ×ª×œ×•×ª ×‘×’×•×‘×”.",

    sec1: "1) ××¨×‘×¢ ××“×™×“×•×ª: ×§×¨×™× ×” ×›×œ×œ×™×ª, ××•×¨, ×× ×¨×’×™×” ×¨×’×¢×™×ª, ×˜××¤×¨×˜×•×¨×”",
    sec1hint: "××’×“×™×¨×™× ×•×§×˜×•×¨ ××“×™×“×•×ª M â€” ×œ×›×œ ×¢×¨×•×¥ ×™×© ×ª×œ×•×ª ×‘×©×“×•×ª ×•×‘××™×§×•×/×–××Ÿ.",
    sec1note: "×›××Ÿ M_eng ×”×™× ×× ×¨×’×™×”/×”×¡×¤×§ ×¨×’×¢×™ (×œ× ××¦×˜×‘×¨), ×•-M_rad ×”×™× â€œ×§×¨×™× ×” ×›×œ×œ×™×ªâ€.",
    map1: "××™×¤×•×™ ×›×œ×œ×™",
    map1t: "F ××™×™×¦×’×ª ××ª ×”×¤×™×–×™×§×” + ×”×©×™×˜×”; Îµ ×©××¨×™×•×ª/×¨×¢×© ×œ× ××•×¡×‘×¨.",
    map2: "××” ××•×“×“×™× ×‘×¤×•×¢×œ",
    map2t: "×”××“×™×“×” ×”×™× â€œ×ª××•× ×”â€ ×“×¨×š ×—×™×™×©×Ÿ: ×›×™×•×œ, ×¤×™×œ×˜×¨×™×, ×”×©×”×™×•×ª ×•×¨×¢×© ×¤× ×™××™. ×œ×¢×™×ª×™× ×¦×¨×™×š ×˜×¨× ×¡×¤×•×¨××™× ×›×“×™ ×œ×”×¤×¨×™×“ ×¨×›×™×‘×™×.",

    sec2: "2) â€œ×‘×§×¨×‘×ª ×”××¡×¤×¨ ×”× ××“×“â€: ×œ×™× ××¨×™×–×¦×™×” ×•×¨×’×™×©×•×™×•×ª",
    sec2hint: "×–×” ×”×§×™×¨×•×‘ ×”××§×•××™: Î”M â‰ˆ JÂ·Î”u.",
    uvec: "×•×§×˜×•×¨ ×§×œ×˜×™×",
    uvecT: "××¤×©×¨ ×œ×”×•×¡×™×£ ×’× ×¨×›×™×‘×™ ×–××Ÿ ××• ×××¤×™×™× ×™ ×˜×¨× ×¡×¤×•×¨××™× ×›×ª×›×•× ×•×ª.",
    jacT: "×™×¢×§×•×‘×™ (Jacobian) = ××˜×¨×™×¦×ª ×¨×’×™×©×•×™×•×ª",
    jacText: "×©×•×¨×•×ª: ×¢×¨×•×¦×™ ××“×™×“×”. ×¢××•×“×•×ª: ××©×ª× ×™× (×©×“×”/×¡×‘×™×‘×”/××™×§×•×). ×–×” â€œ××™ ××©×¤×™×¢ ×¢×œ ××™â€ ×§×¨×•×‘ ×œ× ×§×•×“×ª ×¢×‘×•×“×”.",
    lin: "××•×“×œ ×œ×™× ××¨×™ × ×¤×•×¥",
    linText: "×‘××•×“×œ ×œ×™× ××¨×™ â€” ×”××§×“××™× Î² ×”× ×‘×“×™×•×§ ×”×¢×¨×›×™× ×©×œ J (×¨×’×™×©×•×™×•×ª ××§×•××™×•×ª).",
    interSum: "××™× ×˜×¨××§×¦×™×•×ª (××•××œ×¥ ×›×©×™×© ×”×©×¤×¢×•×ª ×œ×-×œ×™× ××¨×™×•×ª)",
    interText: "×œ×¤×¢××™× ×”×©×¤×¢×ª E ×ª×œ×•×™×” ×‘-H ××• ×‘×¨×¢×© N. ××•×¡×™×¤×™× ××™×‘×¨×™ ××›×¤×œ×”:",

    sec3: "3) ×ª×—×•× ×”×–××Ÿ / ×¤×•×¨×™×™×” / ×œ×¤×œ×¡: ××” ×›×œ ×˜×¨× ×¡×¤×•×¨× â€œ××¤×¨×™×“â€",
    sec3hint: "×›×©××“×™×“×•×ª ×¨×’×¢×™×•×ª ×›×•×œ×œ×•×ª ×¨×¢×© ×•×ª×’×•×‘×” ×©×œ ×—×™×™×©×Ÿ â€” ×”×˜×¨× ×¡×¤×•×¨× ×¢×•×–×¨ ×œ×”×‘×—×™×Ÿ ×‘×™×Ÿ â€œ××•×ªâ€ ×œâ€×¨×¢×©×™×/×“×™× ××™×§×”â€.",
    timeDom: "×ª×—×•× ×”×–××Ÿ",
    timeText: "××ª××™× ×œ×§×¤×™×¦×•×ª, ××’××•×ª ×•××™×¨×•×¢×™× ×‘×–××Ÿ. ×œ×¨×•×‘ ××¤×¨×§×™× ××ª M(t) ×œ×˜×¨× ×“ + ××—×–×•×¨×™ + ×¨×¢×©.",
    fourDom: "×¤×•×¨×™×™×” (Fourier)",
    fourText: "××¤×¨×§ ×œ×ª×“×¨×™×: ×˜×•×‘ ×œ×–×™×”×•×™ ×¨×¢×©×™ ×¨×©×ª (50/60Hz), ×¨×˜×™×˜×•×ª, ××• ×—×ª×™××•×ª ××—×–×•×¨×™×•×ª.",
    lapDom: "×œ×¤×œ×¡ (Laplace) + ×“×™× ××™×§×ª ×—×™×™×©×Ÿ",
    lapText: "×× ×”×—×™×™×©×Ÿ ×œ× ×‘×××ª â€œ××™×™×“×™â€, ××•×“×œ×™× ××•×ª×• ×›×¤×™×œ×˜×¨ ××¡×“×¨ ×¨××©×•×Ÿ ×¢× ×§×‘×•×¢ ×–××Ÿ Ï„. ×–×” ×§×¨×™×˜×™ ×›×©×§×•×¨××™× ×œ×–×” â€œ×¨×’×¢×™â€ ××‘×œ ×™×© ×”×©×”×™×”.",

    sec4: "4) ×§×©×¨×™× ×¤× ×™××™×™× ×‘×™×Ÿ ×”×¢×¨×•×¦×™× (××•×¤×¦×™×•× ×œ×™, ××‘×œ ×—×–×§)",
    sec4hint: "×œ×¤×¢××™× ×”××“×™×“×•×ª ××©×¤×™×¢×•×ª ×–×• ×¢×œ ×–×•. ×–×” ××•×“×œ ×“×•-×©×œ×‘×™: ×©×“×•×ªâ†’××“×™×“×•×ª + ××“×™×“×•×ªâ†”××“×™×“×•×ª.",
    twoStage: "××•×“×œ ×“×•-×©×œ×‘×™",
    twoStageText: "×›×š ××¤×¨×™×“×™× ×‘×™×Ÿ ×”×©×¤×¢×” ×¡×‘×™×‘×ª×™×ª ×œ×‘×™×Ÿ ×™×—×¡×™× ×¤× ×™××™×™× ×‘×™×Ÿ ×¢×¨×•×¦×™ ×”××“×™×“×”.",
    whyCouple: "×œ××” ×–×” ×©×™××•×©×™?",
    whyCoupleText: "×× ×˜××¤×¨×˜×•×¨×” ××©×¤×™×¢×” ×¢×œ ×¢×•×¦××ª ××•×¨, ×›×“××™ ×œ×™×™×¦×’ ×–××ª ×™×©×™×¨×•×ª ×‘××•×“×œ ×‘××§×•× ×œ×”×¢××™×¡ ×”×›×œ ×¢×œ E/H/N.",

    sec5: "5) ××” ×™×•×¦× ×‘×¡×•×£: (1) ×¨×’×™×©×•×™×•×ª, (2) ×¡×¤×§×˜×¨×•×, (3) ××“×™×“×” â€œ× ×§×™×™×”â€",
    sec5hint: "×¤×œ×˜ ×¤×¨×§×˜×™: ×œ×”×‘×™×Ÿ ××” ×‘×××ª ××©×¤×™×¢ ×¢×œ ×”××¡×¤×¨ ×”× ××“×“.",
    out1: "×•×§×˜×•×¨/×˜×‘×œ×ª ×¨×’×™×©×•×™×•×ª",
    out1t: "×œ×›×œ ×¢×¨×•×¥: × ×’×–×¨×•×ª ×—×œ×§×™×•×ª ×‘×™×—×¡ ×œ×©×“×•×ª. ×××¤×©×¨ ×“×™×¨×•×’ ×”×©×¤×¢×”.",
    out2: "× ×™×ª×•×— ×ª×“×¨×™",
    out2t: "×‘×•×“×§×™× ×‘××™×œ×• ×ª×—×•××™ ×ª×“×¨ ×™×•×©×‘×ª ×”×× ×¨×’×™×” ×©×œ ×”××•×ª.",
    cleanT: "3) â€œ××“×™×“×” × ×§×™×™×”â€ (de-bias / de-noise)",
    cleanText: "××¡×™×¨×™× ×¨×›×™×‘×™ ×¨×¢×©/×ª×“×¨×™× ×™×“×•×¢×™× ×›×“×™ ×œ×©×¤×¨ ××ª ×”××•×ª. ×–×” ××•×“×œ ×¢×–×¨, ×œ× ×××ª ××•×—×œ×˜×ª.",
    rights: "×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª. ××™×Ÿ ×œ×©×›×¤×œ ××œ× ×‘××™×©×•×¨."
  },
  en: {
    title: "Explanation + Formulas for a Multi-Field Measurement Model (4 M-channels)",
    subtitle: "Bilingual â€¢ Mathematical formulation â€¢ â€œnear the measured numberâ€ â€¢ Time / Fourier / Laplace",
    lang: "Language",
    theme: "Appearance",

    sec0: "0) Definitions: fields, location, and time",
    sec0hint: "We formalize what a â€œmeasured numberâ€ means when many dimensions exist: E,H,A,W,N,h, coordinates, time, and transforms.",
    vars: "Variable vector",
    varsText: "E electric field, H magnetic field, A air/environment, W water/liquid medium, N noise/pollution, h altitude, x location, t time.",
    keyIdeaT: "Core idea",
    keyIdea: "The â€œmeasured numberâ€ is not a pure scalar; it is a projection of multi-dimensional fields through the sensor/measurement response.",
    sec0more: "Note on â€œwhere you measuredâ€ (Place + Coordinates)",
    sec0moreText: "The same field can appear different at a different location: changing Î”x or Î”h changes the measurement through spatial gradients âˆ‡M and altitude dependence.",

    sec1: "1) Four measurements: general radiation, light, instant energy, temperature",
    sec1hint: "Define the measurement vector M â€” each channel depends on fields plus location/time.",
    sec1note: "Here M_eng is instantaneous energy/power (not accumulated), and M_rad is a general radiation index.",
    map1: "Generic mapping",
    map1t: "F represents physics + method; Îµ is unexplained residual/noise.",
    map2: "What is measured in practice",
    map2t: "Measurements go through a sensor: calibration, filtering, delays, and internal noise. Transforms help separate components.",

    sec2: "2) â€œNear the measured numberâ€: linearization and sensitivities",
    sec2hint: "Local approximation: Î”M â‰ˆ JÂ·Î”u.",
    uvec: "Input vector",
    uvecT: "You can also add time features or transform-based features as inputs.",
    jacT: "Jacobian = sensitivity matrix",
    jacText: "Rows: measurement channels. Columns: variables (field/env/location). This tells â€œwho affects whatâ€ near an operating point.",
    lin: "Common linear model",
    linText: "In a linear model, coefficients Î² are exactly the Jacobian entries (local sensitivities).",
    interSum: "Interactions (recommended for nonlinearity)",
    interText: "Sometimes E depends on H or noise N; add product terms:",

    sec3: "3) Time / Fourier / Laplace: what each transform separates",
    sec3hint: "With instantaneous measurements, noise and sensor dynamics exist; transforms help separate signal vs noise/dynamics.",
    timeDom: "Time domain",
    timeText: "Good for transients, trends, and events. Often decompose M(t) into trend + periodic + noise.",
    fourDom: "Fourier domain",
    fourText: "Frequency decomposition: detects mains noise (50/60Hz), vibrations, or periodic signatures.",
    lapDom: "Laplace domain + sensor dynamics",
    lapText: "If the sensor is not truly instantaneous, model it as a first-order system with time constant Ï„ (a low-pass behavior).",

    sec4: "4) Internal coupling between channels (optional but powerful)",
    sec4hint: "Sometimes channels influence each other. Use a two-stage model: fieldsâ†’measurements + measurementsâ†”measurements.",
    twoStage: "Two-stage model",
    twoStageText: "Separates environmental impact from internal relationships between measured channels.",
    whyCouple: "Why useful?",
    whyCoupleText: "If temperature affects light output, represent it directly instead of forcing everything into E/H/N.",

    sec5: "5) Final outputs: (1) sensitivities, (2) spectrum, (3) â€œcleanedâ€ measurement",
    sec5hint: "Practical deliverables: identify what truly affects the measured number.",
    out1: "Sensitivity vector/table",
    out1t: "For each channel: partial derivatives w.r.t. fields. Enables influence ranking.",
    out2: "Frequency analysis",
    out2t: "Check where the signalâ€™s energy sits across frequency bands.",
    cleanT: "3) â€œCleanedâ€ measurement (de-bias / de-noise)",
    cleanText: "Remove known noise/certain frequency components to improve the signal. This is an auxiliary model, not absolute truth.",
    rights: "All rights reserved. No copying without permission."
  }
};

let LANG = "he";

function applyI18n(){
  document.documentElement.lang = LANG;
  document.documentElement.dir = (LANG === "he") ? "rtl" : "ltr";

  document.querySelectorAll("[data-i18n]").forEach(el=>{
    const key = el.getAttribute("data-i18n");
    if(I18N[LANG][key]) el.textContent = I18N[LANG][key];
  });

  // re-render KaTeX (because direction/lang changes might reflow)
  renderMath();
}

function renderMath(){
  if(!window.renderMathInElement) return;
  renderMathInElement(document.body, {
    delimiters: [
      {left: "$$", right: "$$", display: true},
      {left: "\\[", right: "\\]", display: true},
      {left: "$", right: "$", display: false},
      {left: "\\(", right: "\\)", display: false}
    ],
    throwOnError: false
  });
}

document.getElementById("btnHE").onclick = ()=>{
  LANG="he";
  setLangButtons();
  applyI18n();
};
document.getElementById("btnEN").onclick = ()=>{
  LANG="en";
  setLangButtons();
  applyI18n();
};

function setLangButtons(){
  document.getElementById("btnHE").classList.toggle("primary", LANG==="he");
  document.getElementById("btnEN").classList.toggle("primary", LANG==="en");
}

document.getElementById("btnTheme").onclick = ()=>{
  const html = document.documentElement;
  const cur = html.getAttribute("data-theme") || "light";
  html.setAttribute("data-theme", cur === "light" ? "dark" : "light");
};

window.addEventListener("load", ()=>{
  setLangButtons();
  applyI18n();
  // KaTeX scripts are defer; ensure one more pass after they load
  setTimeout(renderMath, 50);
});
</script>
</body>
</html>
