<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>סיכום מודל: חוק TAN + יאנג (cos²) + פיתגורס כללי</title>
  <meta name="color-scheme" content="light dark" />

  <!-- MathJax (לטעינת נוסחאות LaTeX). עובד אונליין.
       אם תרצה גרסה אופליין: תגיד לי ואכין קובץ עם MathJax מקומי. -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(','\\)'], ['$', '$']] },
      options: { skipHtmlTags: ['script','noscript','style','textarea','pre','code'] }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    :root{
      --bg0:#f4f6fb;
      --bg1:#eef2ff;
      --bg2:#ecfeff;

      --card:rgba(255,255,255,.80);
      --card2:rgba(255,255,255,.62);
      --solid:#ffffff;

      --text:#0f172a;
      --muted:#64748b;
      --line:rgba(148,163,184,.35);

      --head:#0b1220;
      --accent:#6366f1;
      --accent2:#06b6d4;
      --shadow: 0 18px 50px rgba(2,6,23,.10);
      --r:18px;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg0:#0b1220;
        --bg1:#0f172a;
        --bg2:#04151a;

        --card:rgba(17,24,39,.72);
        --card2:rgba(17,24,39,.55);
        --solid:#0b1220;

        --text:#e5e7eb;
        --muted:#9ca3af;
        --line:rgba(148,163,184,.22);

        --head:#f9fafb;
        --shadow: 0 18px 60px rgba(0,0,0,.45);
      }
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Arial, "Noto Sans Hebrew", "Noto Sans Arabic", sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 600px at 10% 5%, var(--bg2), transparent 60%),
        radial-gradient(700px 500px at 90% 0%, var(--bg1), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
    }

    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}

    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:28px 16px 70px;
    }

    .top{
      display:flex;
      gap:14px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
      margin-bottom:14px;
    }

    .hero{
      flex:1 1 520px;
      background: linear-gradient(135deg, rgba(99,102,241,.18), rgba(6,182,212,.14));
      border:1px solid var(--line);
      border-radius: calc(var(--r) + 6px);
      padding:18px 18px 16px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .hero:before{
      content:"";
      position:absolute;
      inset:-80px -80px auto auto;
      width:240px; height:240px;
      background: radial-gradient(circle at 35% 35%, rgba(99,102,241,.35), transparent 60%);
      filter: blur(2px);
      transform: rotate(18deg);
      pointer-events:none;
    }

    h1{
      margin:0 0 8px;
      font-size: clamp(20px, 2.6vw, 30px);
      color:var(--head);
      letter-spacing:.2px;
    }
    .sub{
      margin:0;
      color:var(--muted);
      line-height:1.55;
      font-size: 14.5px;
      max-width: 72ch;
    }

    .pillbar{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    .pill{
      padding:7px 10px;
      border-radius: 999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.35);
      backdrop-filter: blur(10px);
      color:var(--text);
      font-size: 12.5px;
      user-select:none;
    }
    @media (prefers-color-scheme: dark){
      .pill{ background: rgba(17,24,39,.45); }
    }

    .side{
      flex:0 1 360px;
      display:grid;
      gap:12px;
      min-width: 280px;
    }
    .card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      padding: 14px 14px 12px;
      backdrop-filter: blur(10px);
    }
    .card h3{
      margin:0 0 6px;
      font-size: 15px;
      color:var(--head);
    }
    .card p{
      margin:0;
      color:var(--muted);
      line-height: 1.55;
      font-size: 13.5px;
    }

    .grid{
      margin-top:16px;
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:14px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }

    .section{
      background: var(--card);
      border:1px solid var(--line);
      border-radius: calc(var(--r) + 2px);
      box-shadow: var(--shadow);
      padding: 14px 14px 10px;
      backdrop-filter: blur(10px);
    }
    .section h2{
      margin: 0 0 10px;
      font-size: 16px;
      color: var(--head);
      display:flex;
      align-items:center;
      gap:10px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:28px;height:28px;
      border-radius:10px;
      background: linear-gradient(135deg, rgba(99,102,241,.28), rgba(6,182,212,.22));
      border:1px solid var(--line);
      font-weight:700;
      color: var(--head);
      font-size: 13px;
      user-select:none;
    }

    .text{
      color: var(--text);
      line-height:1.7;
      font-size: 14px;
    }
    .muted{ color: var(--muted); }
    .hr{
      height:1px;
      background: var(--line);
      margin: 10px 0;
    }

    .eq{
      direction:ltr;
      text-align:left;
      background: rgba(255,255,255,.55);
      border:1px dashed var(--line);
      border-radius: 14px;
      padding: 10px 12px;
      margin: 10px 0;
      overflow:auto;
    }
    @media (prefers-color-scheme: dark){
      .eq{ background: rgba(17,24,39,.52); }
    }

    .mini{
      display:grid;
      gap:10px;
    }

    .controls{
      display:grid;
      gap:10px;
      margin-top:10px;
    }
    .row{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    label{
      font-size: 12.5px;
      color: var(--muted);
      user-select:none;
    }
    input[type="range"]{
      width: min(480px, 100%);
      accent-color: var(--accent);
    }
    input[type="number"]{
      width: 120px;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.55);
      color: var(--text);
      outline: none;
    }
    @media (prefers-color-scheme: dark){
      input[type="number"]{ background: rgba(17,24,39,.45); }
    }
    .btns{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top: 6px;
    }
    button{
      border: 1px solid var(--line);
      background: linear-gradient(135deg, rgba(99,102,241,.18), rgba(6,182,212,.12));
      color: var(--head);
      border-radius: 14px;
      padding: 9px 12px;
      cursor:pointer;
      font-weight: 700;
      letter-spacing:.1px;
    }
    button:hover{ filter: brightness(1.03); }
    button:active{ transform: translateY(1px); }

    canvas{
      width: 100%;
      height: 260px;
      border-radius: 16px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.55);
    }
    @media (prefers-color-scheme: dark){
      canvas{ background: rgba(17,24,39,.50); }
    }

    .footer{
      margin-top: 14px;
      color: var(--muted);
      font-size: 12.5px;
      line-height:1.6;
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      font-size: 12px;
      padding: 2px 6px;
      border-radius: 8px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.45);
      direction:ltr;
      display:inline-block;
    }
    @media (prefers-color-scheme: dark){
      .kbd{ background: rgba(17,24,39,.45); }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="hero">
        <h1>מודל מעבר־קרינה: חוק TAN + יאנג (cos²) + פיתגורס כללי</h1>
        <p class="sub">
          מטרת המסמך: לסכם מודל שבו הקרינה <b>אינה נבלעת</b> ואינה “נעצרת”, אלא עוברת דרך חומר תוך
          <b>סריקה/הטיה מסלולית</b>. במקום חוק סנל הקלאסי (<span class="kbd">sin</span>), מוצע חוק מעבר מבוסס
          <span class="kbd">tan</span>, ולצידו שילוב עם דפוס ההתאבכות של יאנג (נוסחת <span class="kbd">cos²</span>).
          בנוסף, מוצג משפט פיתגורס כללי לכל מעלה באמצעות פירוק פולינום.
        </p>
        <div class="pillbar">
          <div class="pill">מעבר ללא בליעה</div>
          <div class="pill">שימור אנרגיה</div>
          <div class="pill">חוק TAN</div>
          <div class="pill">Young: cos²</div>
          <div class="pill">פיתגורס כללי (דרגה n)</div>
        </div>
      </div>

      <div class="side">
        <div class="card">
          <h3>הנחה מרכזית</h3>
          <p>
            הקרינה עוברת בתווך אידאלי ללא איבוד אנרגיה: \(E_{\text{in}}=E_{\text{out}}\).
            החומר “מקרין מידע” (סריקה/שינוי מסלול/פאזה), אך לא צורך אנרגיה.
          </p>
        </div>
        <div class="card">
          <h3>הבדל מסנל</h3>
          <p>
            סנל נשען על תנאי פאזה גליים ולכן משתמש ב-\(\sin\theta\).
            כאן המודל מסלולי־גאומטרי ולכן משתמש ב-\(\tan\theta\) (יחס רוחבי/נורמלי).
          </p>
        </div>
      </div>
    </div>

    <div class="grid">
      <!-- Left / main -->
      <div class="section">
        <h2><span class="badge">1</span> הגדרות וחוק TAN</h2>
        <div class="text">
          <p>
            נגדיר מקדם מעבר־קרינה כללי \(K_{\text{rad}}\) (נסמן בקיצור \(K\)).
            הוא מייצג “התאמה מסלולית” בין תווכים עבור קרינה מסוימת, תוך מעבר ללא בליעה.
          </p>

          <div class="eq">
            \[
              K = f(\text{סוג הקרינה},\, \rho_E,\, \nu,\, \text{מבנה חומר},\, \sigma,\, \ldots)
            \]
          </div>

          <p>
            חוק המעבר המוצע (חוק TAN) בין תווך 1 לתווך 2:
          </p>

          <div class="eq">
            \[
              \boxed{K_1\tan\theta_1 = K_2\tan\theta_2}
            \qquad\Rightarrow\qquad
            \boxed{\tan\theta_2=\frac{K_1}{K_2}\tan\theta_1}
            \]
          </div>

          <p class="muted">
            אינטואיציה: \(\tan\theta\) הוא “שיפוע מסלול” (רוחבי/נורמלי). המקדמים \(K\) מיישרים/מותחים את
            השיפוע בעת מעבר תווך — בלי לספוג אנרגיה.
          </p>
        </div>

        <div class="hr"></div>

        <h2><span class="badge">2</span> מודל יאנג (שני סדקים) עם \( \cos^2 \)</h2>
        <div class="text">
          <p>
            שני סדקים במרחק \(d\), אורך גל \(\lambda\), זווית תצפית \(\theta\).
            הפרש הדרך:
          </p>

          <div class="eq">
            \[
              \Delta = d\sin\theta
            \]
          </div>

          <p>הפרש הפאזה:</p>
          <div class="eq">
            \[
              \phi=\frac{2\pi}{\lambda}\Delta
            \]
          </div>

          <p>עוצמת ההתאבכות (תבנית \( \cos^2 \)):</p>
          <div class="eq">
            \[
              \boxed{
              I(\theta)=I_{\max}\cos^2\!\left(\frac{\phi}{2}\right)
              =I_{\max}\cos^2\!\left(\frac{\pi d}{\lambda}\sin\theta\right)}
            \]
          </div>
        </div>

        <div class="hr"></div>

        <h2><span class="badge">3</span> התאמת יאנג ל-\(\tan\theta\) (המרה מדויקת)</h2>
        <div class="text">
          <p>
            זהות טריגונומטרית מדויקת (לא קירוב):
          </p>
          <div class="eq">
            \[
              \boxed{
              \sin\theta=\frac{\tan\theta}{\sqrt{1+\tan^2\theta}}
              }
            \]
          </div>

          <p>לכן, יאנג בכתיב \(\tan\theta\):</p>
          <div class="eq">
            \[
              \boxed{
              I(\theta)=I_{\max}\cos^2\!\left(
              \frac{\pi d}{\lambda}\cdot
              \frac{\tan\theta}{\sqrt{1+\tan^2\theta}}
              \right)}
            \]
          </div>

          <p class="muted">
            כאן בדיוק נכנס שורש מהצורה \(\sqrt{1+\tan^2\theta}\), שמוביל לפיתגורס (ראו סעיף הבא).
          </p>
        </div>

        <div class="hr"></div>

        <h2><span class="badge">4</span> קשר למסך: \(x,L\) והופעת פיתגורס</h2>
        <div class="text">
          <p>
            אם המסך במרחק \(L\) מהסדקים ונקודת המדידה היא \(x\), אז:
          </p>
          <div class="eq">
            \[
              \tan\theta=\frac{x}{L}
            \]
          </div>

          <p>ולכן:</p>
          <div class="eq">
            \[
              \sin\theta=\frac{x}{\sqrt{L^2+x^2}}
            \]
          </div>

          <p>
            כאן מתקבל באופן טבעי:
            \(\,R=\sqrt{L^2+x^2}\Rightarrow R^2=L^2+x^2\)
            — זו נוסחת פיתגורס.
          </p>

          <div class="eq">
            \[
              \boxed{
              I(x)=I_{\max}\cos^2\!\left(
              \frac{\pi d}{\lambda}\cdot
              \frac{x}{\sqrt{L^2+x^2}}
              \right)}
            \]
          </div>
        </div>

        <div class="hr"></div>

        <h2><span class="badge">5</span> שילוב חוק TAN עם דפוס יאנג</h2>
        <div class="text">
          <p>
            אם ההתאבכות “מתפתחת” לפי הזווית אחרי מעבר לתווך 2, אך אנו מתארים את הזווית לפני המעבר,
            משתמשים בחוק:
          </p>
          <div class="eq">
            \[
              \tan\theta_2=\frac{K_1}{K_2}\tan\theta_1
            \]
          </div>

          <p>מציבים ביאנג-כתיב-TAN (אפשר גם לאפשר \(\lambda_2\) בתווך 2):</p>
          <div class="eq">
            \[
              \boxed{
              I(\theta_1)=I_{\max}\cos^2\!\left(
              \frac{\pi d}{\lambda_2}\cdot
              \frac{\left(\frac{K_1}{K_2}\tan\theta_1\right)}
              {\sqrt{1+\left(\frac{K_1}{K_2}\tan\theta_1\right)^2}}
              \right)}
            \]
          </div>

          <p class="muted">
            בהיעדר בליעה: \(I_{\max}\) נשמר (שימור אנרגיה), וההשפעה העיקרית היא שינוי מיקום/צפיפות הפסים.
          </p>
        </div>

        <div class="hr"></div>

        <h2><span class="badge">6</span> משפט פיתגורס הכללי לכל מעלה (פירוק פולינום)</h2>
        <div class="text">
          <p>
            נקודת המוצא:
          </p>
          <div class="eq">
            \[
              a^2+b^2=(a+ib)(a-ib)
            \]
          </div>

          <p>
            מעלים בחזקה \(n\):
          </p>
          <div class="eq">
            \[
              (a^2+b^2)^n = (a+ib)^n(a-ib)^n
            \]
          </div>

          <p>
            מפרקים:
            \((a+ib)^n = P_n(a,b)+iQ_n(a,b)\)
            כאשר \(P_n,Q_n\) הם פולינומים ממשיים מדרגה \(n\).
            לכן:
          </p>

          <div class="eq">
            \[
              (a-ib)^n = P_n(a,b)-iQ_n(a,b)
            \]
          </div>

          <p>כפל נותן סכום ריבועים:</p>
          <div class="eq">
            \[
              (P_n+iQ_n)(P_n-iQ_n)=P_n^2+Q_n^2
            \]
          </div>

          <p><b>משפט פיתגורס הכללי:</b></p>
          <div class="eq">
            \[
              \boxed{(a^2+b^2)^n = P_n(a,b)^2 + Q_n(a,b)^2}
            \]
          </div>

          <p>
            נוסחאות מפורשות (מבינום), הפרדה לזוגי/אי-זוגי:
          </p>

          <div class="eq">
            \[
              \boxed{
              P_n(a,b)=\sum_{m=0}^{\lfloor n/2\rfloor}\binom{n}{2m}\,a^{n-2m}\,b^{2m}\,(-1)^m
              }
            \]
            \[
              \boxed{
              Q_n(a,b)=\sum_{m=0}^{\lfloor (n-1)/2\rfloor}\binom{n}{2m+1}\,a^{n-(2m+1)}\,b^{2m+1}\,(-1)^m
              }
            \]
          </div>

          <p><b>דוגמאות:</b></p>

          <div class="eq">
            \[
              n=2:\quad (a^2+b^2)^2=(a^2-b^2)^2+(2ab)^2
            \]
            \[
              n=3:\quad (a^2+b^2)^3=(a^3-3ab^2)^2+(3a^2b-b^3)^2
            \]
          </div>

          <p class="muted">
            רעיון מחבר: במודל שלך מופיעים ביטויים מסוג “שורש סכום ריבועים”
            (כמו \(\sqrt{L^2+x^2}\) או \(\sqrt{1+\tan^2\theta}\)).
            הכללה לחזקות מובילה טבעית למשפחת זהויות “סכום ריבועים” מדרגה \(n\).
          </p>
        </div>
      </div>

      <!-- Right / interactive -->
      <div class="section">
        <h2><span class="badge">7</span> הדמיה קצרה: דפוס יאנג עם יחס \(K_1/K_2\)</h2>
        <div class="text">
          <p class="muted">
            הגרף מצייר באופן איכותי דפוס אינטנסיביות על המסך לפי:
            \[
              I(x)=\cos^2\!\Big(\alpha\cdot \sin\theta_2(x)\Big),
              \quad \tan\theta_2=\frac{K_1}{K_2}\tan\theta_1,\ \tan\theta_1=\frac{x}{L}
            \]
            (מנורמל ל-0..1).  
            זה לא “ניסוי אמיתי” אלא כלי להמחשה של השפעת \(K\) על צפיפות הפסים.
          </p>

          <div class="controls">
            <div class="row">
              <label for="kRatio">יחס \(K_1/K_2\)</label>
              <input id="kRatio" type="range" min="0.25" max="4" value="1" step="0.01" />
              <input id="kRatioNum" type="number" min="0.25" max="4" value="1" step="0.01" />
            </div>

            <div class="row">
              <label for="alpha">פרמטר \(\alpha=\pi d/\lambda_2\) (סקאלה)</label>
              <input id="alpha" type="range" min="5" max="200" value="60" step="1" />
              <input id="alphaNum" type="number" min="5" max="200" value="60" step="1" />
            </div>

            <div class="row">
              <label for="L">מרחק מסך \(L\) (יחסי)</label>
              <input id="L" type="range" min="0.6" max="6" value="2" step="0.05" />
              <input id="LNum" type="number" min="0.6" max="6" value="2" step="0.05" />
            </div>

            <div class="btns">
              <button id="resetBtn" type="button">איפוס</button>
              <button id="downloadBtn" type="button">הורד גרף כ-PNG</button>
            </div>
          </div>

          <div style="margin-top:10px">
            <canvas id="plot" width="900" height="360"></canvas>
          </div>

          <div class="footer">
            טיפ: אם תרצה רזולוציה גבוהה/טווחים אמיתיים (\(d,\lambda\) ביחידות), אפשר להפוך את ההדמיה למדויקת יותר
            ולהוסיף גם מעטפת סדק יחיד (sinc²) ומקורות מרובים.
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
  const el = (id) => document.getElementById(id);

  const kRatio = el("kRatio");
  const kRatioNum = el("kRatioNum");
  const alpha = el("alpha");
  const alphaNum = el("alphaNum");
  const L = el("L");
  const LNum = el("LNum");

  const canvas = el("plot");
  const ctx = canvas.getContext("2d");

  function syncRangeAndNumber(rangeEl, numEl){
    rangeEl.addEventListener("input", () => { numEl.value = rangeEl.value; draw(); });
    numEl.addEventListener("input", () => {
      const v = Math.min(parseFloat(numEl.max), Math.max(parseFloat(numEl.min), parseFloat(numEl.value || rangeEl.value)));
      numEl.value = v;
      rangeEl.value = v;
      draw();
    });
  }

  syncRangeAndNumber(kRatio, kRatioNum);
  syncRangeAndNumber(alpha, alphaNum);
  syncRangeAndNumber(L, LNum);

  el("resetBtn").addEventListener("click", () => {
    kRatio.value = kRatioNum.value = 1;
    alpha.value  = alphaNum.value  = 60;
    L.value      = LNum.value      = 2;
    draw();
  });

  el("downloadBtn").addEventListener("click", () => {
    const a = document.createElement("a");
    a.download = "young_tan_k_ratio_plot.png";
    a.href = canvas.toDataURL("image/png");
    a.click();
  });

  function I_of_x(x, Lval, k, alphaVal){
    // tan(theta1)=x/L
    const tan1 = x / Lval;
    // law: tan(theta2)=k*tan(theta1)
    const tan2 = k * tan1;

    // sin(theta2)=tan2/sqrt(1+tan2^2)
    const sin2 = tan2 / Math.sqrt(1 + tan2*tan2);

    // intensity normalized: cos^2(alpha * sin(theta2))
    const phase = alphaVal * sin2;
    const c = Math.cos(phase);
    return c*c;
  }

  function draw(){
    const w = canvas.width, h = canvas.height;
    ctx.clearRect(0,0,w,h);

    // background
    ctx.fillRect(0,0,w,h);

    // margins
    const m = {l:60, r:20, t:18, b:44};
    const pw = w - m.l - m.r;
    const ph = h - m.t - m.b;

    // axes
    ctx.globalAlpha = 0.9;
    ctx.beginPath();
    ctx.moveTo(m.l, m.t);
    ctx.lineTo(m.l, m.t+ph);
    ctx.lineTo(m.l+pw, m.t+ph);
    ctx.strokeStyle = "rgba(148,163,184,.75)";
    ctx.lineWidth = 2;
    ctx.stroke();

    // labels
    ctx.fillStyle = "rgba(100,116,139,.95)";
    ctx.font = "bold 14px system-ui,Segoe UI,Arial";
    ctx.textAlign = "right";
    ctx.fillText("I (מנורמל)", m.l-10, m.t+14);

    ctx.textAlign = "left";
    ctx.fillText("x (יחסי)", m.l+pw-10, m.t+ph+34);

    // plot
    const k = parseFloat(kRatio.value);
    const a = parseFloat(alpha.value);
    const Lval = parseFloat(L.value);

    // x domain
    const xMin = -4.0;
    const xMax =  4.0;

    function X(u){ return m.l + (u - xMin) * pw / (xMax - xMin); }
    function Y(v){ return m.t + (1 - v) * ph; }

    // grid (few lines)
    ctx.lineWidth = 1;
    ctx.strokeStyle = "rgba(148,163,184,.25)";
    for (let i=1;i<=4;i++){
      const yy = m.t + i*ph/5;
      ctx.beginPath();
      ctx.moveTo(m.l, yy);
      ctx.lineTo(m.l+pw, yy);
      ctx.stroke();
    }
    for (let i=1;i<=7;i++){
      const xx = m.l + i*pw/8;
      ctx.beginPath();
      ctx.moveTo(xx, m.t);
      ctx.lineTo(xx, m.t+ph);
      ctx.stroke();
    }

    // curve
    ctx.lineWidth = 2.5;
    ctx.strokeStyle = "rgba(15,23,42,.92)";
    ctx.beginPath();

    const N = 1200;
    for(let i=0;i<=N;i++){
      const u = xMin + (xMax-xMin)*(i/N);
      const v = I_of_x(u, Lval, k, a);
      const px = X(u), py = Y(v);
      if(i===0) ctx.moveTo(px, py);
      else ctx.lineTo(px, py);
    }
    ctx.stroke();

    // title box
    ctx.globalAlpha = 1;
    ctx.fillStyle = "rgba(255,255,255,.45)";
    ctx.fillRect(m.l, 6, pw, 26);
    ctx.fillStyle = "rgba(2,6,23,.85)";
    ctx.font = "bold 13px system-ui,Segoe UI,Arial";
    ctx.textAlign = "right";
    const title = `דפוס יאנג (cos²) עם חוק TAN • יחס K1/K2=${k.toFixed(2)} • α=${a.toFixed(0)} • L=${Lval.toFixed(2)}`;
    ctx.fillText(title, m.l+pw-8, 25);

    // x ticks labels
    ctx.fillStyle = "rgba(100,116,139,.95)";
    ctx.font = "12px system-ui,Segoe UI,Arial";
    ctx.textAlign = "center";
    for (let t=-4; t<=4; t+=2){
      const xx = X(t);
      ctx.fillText(String(t), xx, m.t+ph+20);
    }

    // y ticks labels
    ctx.textAlign = "right";
    for (let t=0; t<=1.0001; t+=0.25){
      const yy = Y(t);
      ctx.fillText(t.toFixed(2), m.l-8, yy+4);
    }
  }

  // first draw after paint
  draw();
</script>
</body>
</html>
