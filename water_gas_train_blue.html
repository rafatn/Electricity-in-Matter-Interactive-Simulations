<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>×¨×›×‘×ª ××™× ×¢×œ ×’×– - ×—×™×‘×•×¨ ×¢×•×œ××™ ×“×¨×š ×”×™×</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root {
      --bg: #021526;
      --card-bg: #06223a;
      --accent: #29b6f6;
      --accent-soft: rgba(41, 182, 246, 0.18);
      --accent-2: #4dd0e1;
      --text-main: #f3fbff;
      --text-muted: #b2c7d8;
      --danger: #ff6b81;
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      background: radial-gradient(circle at top, #093053, #020b16);
      color: var(--text-main);
      direction: rtl;
    }

    .page {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1.5rem 1rem 3rem;
    }

    header {
      text-align: center;
      margin-bottom: 2rem;
    }

    header h1 {
      font-size: 2.1rem;
      margin: 0.5rem 0;
    }

    header h2 {
      font-size: 1.1rem;
      font-weight: 400;
      color: var(--text-muted);
      margin: 0.3rem 0 1rem;
    }

    .tagline {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.35rem 0.8rem;
      border-radius: 999px;
      background: linear-gradient(90deg, #29b6f622, #4dd0e122);
      border: 1px solid #29b6f666;
      font-size: 0.85rem;
      color: var(--accent-2);
    }

    .tagline span.icon {
      font-size: 1.1rem;
    }

    .byline {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .lang-switcher {
      margin-top: 0.8rem;
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    main {
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2.4fr);
      gap: 1.5rem;
    }

    @media (max-width: 900px) {
      main {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: linear-gradient(135deg, #06223a, #04121f);
      border-radius: 1.2rem;
      padding: 1.2rem 1.3rem;
      border: 1px solid rgba(255, 255, 255, 0.06);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.6);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 0% 0%, #29b6f628, transparent 55%),
        radial-gradient(circle at 100% 0%, #4dd0e128, transparent 55%);
      opacity: 0.7;
      pointer-events: none;
    }

    .card-inner {
      position: relative;
      z-index: 1;
    }

    .card h3 {
      margin: 0 0 0.6rem;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .card h3 .emoji {
      font-size: 1.2rem;
    }

    .card p {
      margin: 0.2rem 0;
      font-size: 0.92rem;
      color: var(--text-muted);
      line-height: 1.5;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.6rem;
    }

    .pill {
      font-size: 0.78rem;
      padding: 0.3rem 0.7rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      background: rgba(2, 19, 32, 0.9);
      color: var(--text-muted);
    }

    .highlight {
      color: var(--accent);
    }

    .flow-section-title {
      margin-top: 0.7rem;
      margin-bottom: 0.4rem;
      font-size: 0.95rem;
      color: var(--text-main);
    }

    .flowchart {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: stretch;
      justify-content: center;
      margin-bottom: 0.4rem;
    }

    .flow-step {
      min-width: 120px;
      max-width: 200px;
      flex: 1 1 120px;
      background: rgba(3, 24, 42, 0.96);
      border-radius: 0.9rem;
      padding: 0.5rem 0.7rem;
      border: 1px solid rgba(41, 182, 246, 0.55);
      position: relative;
    }

    .flow-step h4 {
      margin: 0 0 0.3rem;
      font-size: 0.88rem;
      color: var(--accent);
    }

    .flow-step p {
      margin: 0;
      font-size: 0.8rem;
      color: var(--text-muted);
      line-height: 1.4;
    }

    .flow-arrow {
      align-self: center;
      font-size: 1.7rem;
      opacity: 0.7;
    }

    .diagram-wrapper {
      margin-top: 0.9rem;
      border-radius: 0.9rem;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: radial-gradient(circle at top, #08335a, #04131f);
    }

    svg {
      width: 100%;
      height: auto;
      display: block;
    }

    .calc-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 0.8rem;
      margin-top: 0.6rem;
    }

    @media (max-width: 700px) {
      .calc-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .field-group {
      margin-bottom: 0.6rem;
    }

    label {
      display: block;
      font-size: 0.82rem;
      margin-bottom: 0.2rem;
      color: var(--text-muted);
    }

    input[type="number"] {
      width: 100%;
      padding: 0.45rem 0.6rem;
      border-radius: 0.6rem;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: rgba(3, 18, 30, 0.9);
      color: var(--text-main);
      font-size: 0.9rem;
    }

    input[type="number"]::placeholder {
      color: #6f88a1;
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.4rem;
    }

    button {
      border-radius: 999px;
      border: none;
      padding: 0.4rem 0.9rem;
      font-size: 0.82rem;
      cursor: pointer;
      background: linear-gradient(90deg, #29b6f6, #4dd0e1);
      color: #02121f;
      font-weight: 600;
      box-shadow: 0 10px 22px rgba(0, 0, 0, 0.6);
      transition: transform 0.12s ease, box-shadow 0.12s ease,
        filter 0.12s ease;
      white-space: nowrap;
    }

    button.secondary {
      background: rgba(4, 26, 41, 0.96);
      color: var(--text-muted);
      border: 1px solid rgba(255, 255, 255, 0.14);
      box-shadow: none;
    }

    button.lang-btn {
      padding-inline: 0.7rem;
      font-size: 0.8rem;
    }

    button.active-lang {
      box-shadow: 0 0 0 1px #ffffffaa, 0 10px 22px rgba(0, 0, 0, 0.7);
    }

    button:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 14px 28px rgba(0, 0, 0, 0.7);
    }

    button.secondary:hover {
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.6);
    }

    .small-note {
      font-size: 0.78rem;
      color: var(--text-muted);
      margin-top: 0.4rem;
    }

    .result-box {
      margin-top: 0.4rem;
      padding: 0.6rem 0.7rem;
      border-radius: 0.8rem;
      background: rgba(2, 14, 26, 0.96);
      border: 1px dashed rgba(41, 182, 246, 0.7);
      font-size: 0.9rem;
      min-height: 2.3rem;
      display: flex;
      align-items: center;
    }

    .error {
      color: var(--danger);
    }

    .gantt {
      margin-top: 0.6rem;
      background: radial-gradient(circle at 0 0, #29b6f622, transparent 55%);
      border-radius: 0.8rem;
      padding: 0.6rem 0.8rem;
      border: 1px solid rgba(255, 255, 255, 0.06);
    }

    .gantt-row {
      display: grid;
      grid-template-columns: 100px minmax(0, 1fr);
      gap: 0.4rem;
      margin-bottom: 0.4rem;
      font-size: 0.8rem;
      align-items: center;
    }

    .gantt-label {
      color: var(--text-muted);
    }

    .gantt-bar-bg {
      position: relative;
      height: 0.65rem;
      border-radius: 999px;
      background: rgba(1, 12, 23, 0.96);
      overflow: hidden;
    }

    .gantt-bar {
      position: absolute;
      inset-block: 0;
      inset-inline-start: 0;
      border-radius: inherit;
      background: linear-gradient(90deg, #29b6f6, #4dd0e1);
    }

    .gantt-caption {
      margin-top: 0.3rem;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    footer {
      margin-top: 1.6rem;
      text-align: center;
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    footer span {
      color: var(--accent-2);
    }
  </style>

  <script src="https://cdn.jsdelivr.net/pyodide/v0.29.0/full/pyodide.js"></script>
</head>
<body>
  <div class="page">
    <header>
      <div class="tagline">
        <span class="icon">ğŸŒŠ</span>
        ×¨×›×‘×ª ××™× ×¢×œ ×’×– â€“ ×—×™×‘×•×¨ ×”×¢×•×œ× ×“×¨×š ×”×™×
      </div>
      <h1>×¨×›×‘×ª ××™× ×¢×œ ×’×– ×¢×œÖ¾×™××™×ª</h1>
      <h2>
        ××¢×¨×›×ª ×ª×—×‘×•×¨×” ×¢×•×œ××™×ª ×œ×œ× ×“×œ×§ ×¤×•×¡×™×œ×™, ×¢×œ ×©×›×‘×•×ª ××™× ×•×’×–, ×¢× ×™×›×•×œ×ª ×”×¦×œ×” ××”×™×¨×” ×‘×™×‘×©×”
      </h2>
      <div class="byline">
        ×¨×¢×™×•×Ÿ ×•×¤×™×ª×•×— ×§×•× ×¡×¤×˜×•××œ×™: <strong>×¨××¤×ª × ××˜×•×¨</strong>
      </div>

      <div class="lang-switcher">
        <button class="lang-btn active-lang" data-lang="he">×¢×‘×¨×™×ª</button>
        <button class="lang-btn" data-lang="en">English (×‘×¢×ª×™×“)</button>
        <button class="lang-btn" data-lang="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ù„Ø§Ø­Ù‚Ù‹Ø§)</button>
      </div>
    </header>

    <main>
      <section class="card">
        <div class="card-inner">
          <h3>
            <span class="emoji">ğŸ§ </span>
            ×œ×™×‘×ª ×”×¨×¢×™×•×Ÿ ×•×ª×¨×©×™××™ ×–×¨×™××”
          </h3>
          <p>
            ×¨×›×‘×ª ×’×œ×•×‘×œ×™×ª ×©× ×¢×” ×¢×œ
            <span class="highlight">××¡×™×œ×” ×ª×—×ª×•× ×”</span>
            ×©×œ ×©×›×‘×•×ª ××™× ×•×’×– ×“×—×•×¡, ×•×¢×œ
            <span class="highlight">××¡×™×œ×” ×¢×œ×™×•× ×”</span>
            ××’× ×˜×™×ª/×—×©××œ×™×ª ×”××™×™×¦×‘×ª ××ª ×”××¡×œ×•×œ. ×”×× ×¨×’×™×” ××•×¤×§×ª ××”×™×, ××”×©××© ×•××”×¨×•×— â€“
            ×œ×œ× ××’×™×¨×ª ×“×œ×§ ×§×œ××¡×™×ª.
          </p>
          <p>
            ×‘××¦×‘ ×—×™×¨×•× ×”×¨×›×‘×ª ×™×›×•×œ×” ×œ×”×ª× ×ª×§ ××”××¡×™×œ×•×ª, ×œ×¦×•×£ ××¢×œ ×¤× ×™ ×”×™× ×›×¨×—×¤×ªÖ¾×¢×œ,
            ×•×œ×”×©×ª××© ×‘×× ×¨×’×™×” ×©× ××’×¨×” ××”×¡×‘×™×‘×” ×›×“×™ ×œ×”×’×™×¢ ×‘××”×™×¨×•×ª ×œ× ×§×•×“×ª ×™×‘×©×” ×‘×˜×•×—×”
            ×œ×¦×•×¨×š ×—×™×œ×•×¥ ×”× ×•×¡×¢×™×.
          </p>

          <div class="pill-row">
            <div class="pill">××¤×¡ ×“×œ×§ ×¤×•×¡×™×œ×™</div>
            <div class="pill">×©×›×‘×•×ª ××™×+×’×– ×‘×¢×•×‘×™ ××ª×•×›× ×Ÿ</div>
            <div class="pill">××¡×™×œ×•×ª ×¢×œ×™×•× ×•×ª ××’× ×˜×™×•×ª</div>
            <div class="pill">××¦×‘ ×”×¦×œ×” ×œ×™×‘×©×•×ª</div>
          </div>

          <h4 class="flow-section-title">
            ×ª×¨×©×™× ×–×¨×™××” 1 â€“ ×ª× ×•×¢×ª ×× ×¨×’×™×” ×•× ×¡×™×¢×”
          </h4>
          <div class="flowchart">
            <div class="flow-step">
              <h4>1. ××™×¡×•×£ ×× ×¨×’×™×” ××”×™×</h4>
              <p>×’×œ×™×, ×–×¨××™× ×•×¤×¨×©×™ ×œ×—×¥ ××•××¨×•×ª ×œ×—×©××œ × ×§×™ ×œ××•×¨×š ×”××¡×œ×•×œ.</p>
            </div>
            <div class="flow-arrow">âœ</div>
            <div class="flow-step">
              <h4>2. ××™× â†’ ×’×– ×“×—×•×¡</h4>
              <p>×”×™×“×¨×•×œ×™×–×” ×•×”×™×“×¨×•×“×™× ××™×§×” ××™×™×¦×¨×•×ª ×’×– ×œ×”×¨××”, ×“×—×™×¤×” ×•×™×™×¦×•×‘.</p>
            </div>
            <div class="flow-arrow">âœ</div>
            <div class="flow-step">
              <h4>3. ×›×¨×™×ª ××™×â€“×’×–</h4>
              <p>×©×›×‘×•×ª ×‘×¢×•×‘×™ ××—×•×©×‘ ×™×•×¦×¨×•×ª ××¡×™×œ×” ×ª×—×ª×•× ×” ×—×œ×§×” ××¢×œ ×”×™×.</p>
            </div>
            <div class="flow-arrow">âœ</div>
            <div class="flow-step">
              <h4>4. ××¡×™×œ×” ×¢×œ×™×•× ×”</h4>
              <p>××’× ×˜×™× ×•×—×™×™×©× ×™× ×©×•××¨×™× ×¢×œ ×’×•×‘×”, ×›×™×•×•×Ÿ ×•××”×™×¨×•×ª ××“×•×™×§×™×.</p>
            </div>
            <div class="flow-arrow">âœ</div>
            <div class="flow-step">
              <h4>5. ×ª× ×•×¢×” ×‘×™×Ÿ ×™×‘×©×•×ª</h4>
              <p>× ×¡×™×¢×•×ª ×¨×¦×™×¤×•×ª ×•××”×™×¨×•×ª, ×¢× × ×™×”×•×œ ×¢×•××¡×™× ×’×œ×•×‘×œ×™.</p>
            </div>
          </div>

          <h4 class="flow-section-title">
            ×ª×¨×©×™× ×–×¨×™××” 2 â€“ ××¦×‘ ×—×™×¨×•× ×•×”×¦×œ×”
          </h4>
          <div class="flowchart">
            <div class="flow-step">
              <h4>1. ×–×™×”×•×™ ×‘×¢×™×”</h4>
              <p>×—×™×™×©× ×™× ××–×”×™× ×›×©×œ ×‘××¡×™×œ×”, ×¡×•×¤×” ×§×™×¦×•× ×™×ª ××• ×ª×§×œ×” ×‘××¢×¨×›×ª.</p>
            </div>
            <div class="flow-arrow">âœ</div>
            <div class="flow-step">
              <h4>2. ×”×¨××” ××¢×œ ×”×™×</h4>
              <p>×›×¨×™×•×ª ×’×– ××ª× ×¤×—×•×ª ×•×”×¨×›×‘×ª ×”×•×¤×›×ª ×œ"×¡×¤×™× ×ª ×”×¦×œ×”" ×¦×¤×” ×•×™×¦×™×‘×”.</p>
            </div>
            <div class="flow-arrow">âœ</div>
            <div class="flow-step">
              <h4>3. ×©×™××•×© ×‘×× ×¨×’×™×” ×©× ××¡×¤×”</h4>
              <p>×©××©, ×¨×•×— ×•×’×œ×™× ×× ×™×¢×™× ××ª ×”××¢×¨×›×ª ×œ×›×™×•×•×Ÿ ×”×™×‘×©×” ×”×§×¨×•×‘×”.</p>
            </div>
            <div class="flow-arrow">âœ</div>
            <div class="flow-step">
              <h4>4. × ×—×™×ª×” ×‘×˜×•×—×”</h4>
              <p>×”×’×¢×” ×œ× ×§×•×“×•×ª ×—×™×œ×•×¥, ×‘×ª×™ ×—×•×œ×™× ×•× ××œ×™ ×—×™×¨×•× ×™×™×¢×•×“×™×™×.</p>
            </div>
          </div>

          <div class="diagram-wrapper">
            <svg viewBox="0 0 600 220" xmlns="http://www.w3.org/2000/svg">
              <rect x="0" y="80" width="600" height="140" fill="#043058"/>
              <path d="M0 110 Q 50 90 100 110 T 200 110 T 300 110 T 400 110 T 500 110 T 600 110"
                    fill="none" stroke="#4fc3f7" stroke-width="2" opacity="0.9"/>
              <rect x="40" y="130" width="520" height="30" fill="#063455" stroke="#4dd0e1" stroke-width="1.5" />
              <rect x="60" y="140" width="480" height="10" rx="4" fill="#29b6f6"/>
              <rect x="190" y="115" width="220" height="25" rx="8" fill="#f3fbff"/>
              <rect x="200" y="120" width="60" height="16" rx="4" fill="#06223a"/>
              <rect x="270" y="120" width="60" height="16" rx="4" fill="#06223a"/>
              <rect x="340" y="120" width="60" height="16" rx="4" fill="#06223a"/>
              <rect x="80" y="60" width="440" height="6" rx="3" fill="#4dd0e1"/>
              <rect x="100" y="66" width="4" height="44" fill="#0e2742"/>
              <rect x="200" y="66" width="4" height="44" fill="#0e2742"/>
              <rect x="300" y="66" width="4" height="44" fill="#0e2742"/>
              <rect x="400" y="66" width="4" height="44" fill="#0e2742"/>
              <rect x="500" y="66" width="4" height="44" fill="#0e2742"/>
              <text x="90" y="55" fill="#f3fbff" font-size="11">
                ××¡×™×œ×” ×¢×œ×™×•× ×” ××’× ×˜×™×ª
              </text>
              <text x="70" y="135" fill="#b3e5fc" font-size="11">
                ×©×›×‘×ª ×’×– ×“×—×•×¡ ×ª×ªÖ¾×™××™×ª
              </text>
              <text x="200" y="108" fill="#f3fbff" font-size="11">
                ×¨×›×‘×ª ××™× ×¢×œ ×’×–
              </text>
              <text x="20" y="200" fill="#bbdefb" font-size="11">
                ×™× ×¤×ª×•×—
              </text>
            </svg>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="card-inner">
          <h3>
            <span class="emoji">ğŸ</span>
            ××—×©×‘×•×Ÿ Python â€“ ×–××Ÿ × ×¡×™×¢×” ×¢×•×œ××™
          </h3>
          <p>
            ×›××Ÿ ××©×•×œ×‘ ×§×•×“ <span class="highlight">Python</span> ×—×™ (×‘×××¦×¢×•×ª Pyodide)
            ×œ×—×™×©×•×‘ ×–××Ÿ × ×¡×™×¢×” ××©×•×¢×¨ ×©×œ ×¨×›×‘×ª ×”××™×Ö¾×¢×œÖ¾×’×– ×× ××—×‘×¨×™× ××ª ×”×¢×•×œ× ×“×¨×š ×”×™×.
          </p>
          <p>
            × ×™×ª×Ÿ ×œ×”×–×™×Ÿ ××¨×—×§ ×‘×™×, ××”×™×¨×•×ª ×××•×¦×¢×ª, ××¡×¤×¨ ××§×˜×¢×™× (×¢×¦×™×¨×•×ª) ×•×–××Ÿ ×¢×¦×™×¨×” ×××•×¦×¢ ×‘×›×œ ××§×˜×¢.
            ×”×ª×•×¦××” ××—×•×©×‘×ª ×‘×©×¢×•×ª ×•×‘×™××™×.
          </p>

          <div class="calc-grid">
            <div>
              <div class="field-group">
                <label for="distance">
                  ××¨×—×§ ×‘×™× (×§"×)
                </label>
                <input
                  id="distance"
                  type="number"
                  placeholder="×œ×“×•×’××”: 40075 (×”×™×§×£ ×›×“×•×¨ ×”××¨×¥ ×‘×§×• ×”××©×•×•×”)"
                  value="40075"
                  step="1"
                  min="1"
                />
              </div>
              <div class="field-group">
                <label for="speed">
                  ××”×™×¨×•×ª ×××•×¦×¢×ª ×©×œ ×”×¨×›×‘×ª (×§××´×©)
                </label>
                <input
                  id="speed"
                  type="number"
                  placeholder="×œ×“×•×’××”: 600 ×§××´×© ×‘××¡×™×œ×” ×™××™×ª ××”×™×¨×”"
                  value="600"
                  step="10"
                  min="10"
                />
              </div>
              <div class="field-group">
                <label for="segments">
                  ××¡×¤×¨ ××§×˜×¢×™× / ×¢×¦×™×¨×•×ª ×‘×“×¨×š
                </label>
                <input
                  id="segments"
                  type="number"
                  placeholder="×œ×“×•×’××”: 8â€“12 ×¢×¦×™×¨×•×ª ×™×‘×©×ª×™×•×ª"
                  value="10"
                  step="1"
                  min="0"
                />
              </div>
              <div class="field-group">
                <label for="stop-time">
                  ×–××Ÿ ×¢×¦×™×¨×” ×××•×¦×¢ ×‘×›×œ ××§×˜×¢ (×©×¢×•×ª)
                </label>
                <input
                  id="stop-time"
                  type="number"
                  placeholder="×œ×“×•×’××”: 1.5 ×©×¢×•×ª ×¢×¦×™×¨×”"
                  value="1.5"
                  step="0.1"
                  min="0"
                />
              </div>
              <div class="btn-row">
                <button type="button" onclick="calculateTravelTime()">
                  ×—×™×©×•×‘ ×–××Ÿ × ×¡×™×¢×”
                </button>
                <button
                  type="button"
                  class="secondary"
                  onclick="setPresetDistance(40075)"
                  title="×”×™×§×£ ×›×“×•×¨ ×”××¨×¥ ×‘×§×• ×”××©×•×•×”"
                >
                  ğŸŒ ×”×™×§×£ ×”×¢×•×œ× ~40,075 ×§"×
                </button>
                <button
                  type="button"
                  class="secondary"
                  onclick="setPresetDistance(60000)"
                  title="×¨×©×ª ××¡×™×œ×•×ª ×’×œ×•×‘×œ×™×ª ×“×¨×š ×”×™××™× ×”×¢×™×§×¨×™×™×"
                >
                  ğŸŒ ×¨×©×ª ×’×œ×•×‘×œ×™×ª ××•×¨×—×‘×ª ~60,000 ×§"×
                </button>
                <button
                  type="button"
                  class="secondary"
                  onclick="setPresetDistance(9000)"
                  title="×œ×“×•×’××”: ××¡×œ×•×œ ×‘×™×Ÿ-×™×‘×©×ª×™ ×˜×™×¤×•×¡×™"
                >
                  âœˆï¸ ××¡×œ×•×œ ×‘×™×Ÿ-×™×‘×©×ª×™ ~9,000 ×§"×
                </button>
              </div>
              <div id="calc-note" class="small-note">
                ×”×—×™×©×•×‘ ××‘×•×¦×¢ ×‘×“×¤×“×¤×Ÿ ×©×œ×š ×‘×××¦×¢×•×ª Python (Pyodide). ×‘×¤×¢× ×”×¨××©×•× ×”
                ×™×™×ª×›×Ÿ ×¢×™×›×•×‘ ×§×¦×¨ ×‘×–××Ÿ ×˜×¢×™× ×ª ×× ×•×¢ ×¤×™×™×ª×•×Ÿ.
              </div>
            </div>

            <div>
              <div id="calc-result" class="result-box">
                ×–××Ÿ ×”× ×¡×™×¢×” ×”×›×•×œ×œ ×™×•×¦×’ ×›××Ÿ ×œ××—×¨ ×”×—×™×©×•×‘.
              </div>
              <div id="calc-error" class="small-note error" style="display:none;">
                ×©×’×™××” ×‘×§×œ×˜ â€“ ×‘×“×•×§ ×©×”××¨×—×§, ×”××”×™×¨×•×ª ×•× ×ª×•× ×™ ×”×¢×¦×™×¨×•×ª ×ª×§×™× ×™×.
              </div>

              <div class="gantt">
                <div class="gantt-row">
                  <div class="gantt-label">×©×œ×‘ 1</div>
                  <div class="gantt-bar-bg">
                    <div class="gantt-bar" style="width: 20%;"></div>
                  </div>
                </div>
                <div class="gantt-row">
                  <div class="gantt-label">×©×œ×‘ 2</div>
                  <div class="gantt-bar-bg">
                    <div class="gantt-bar" style="width: 40%;"></div>
                  </div>
                </div>
                <div class="gantt-row">
                  <div class="gantt-label">×©×œ×‘ 3</div>
                  <div class="gantt-bar-bg">
                    <div class="gantt-bar" style="width: 70%;"></div>
                  </div>
                </div>
                <div class="gantt-row">
                  <div class="gantt-label">×©×œ×‘ 4</div>
                  <div class="gantt-bar-bg">
                    <div class="gantt-bar" style="width: 100%;"></div>
                  </div>
                </div>
                <div class="gantt-caption">
                  ×“×•×’××ª ×¦×™×¨ ×–××Ÿ ×œ×¤×¨×•×™×§×˜ ×’×œ×•×‘×œ×™: 1â€“3 ×©× ×™× ×œ×¤×™×ª×•×— ×¨××©×•× ×™,
                  5â€“10 ×©× ×™× ×œ×¤×¨×™×¡×ª ×§×•×•×™× ×¨××©×™×™× ×‘×™×Ÿ ×™×‘×©×•×ª, ×•××– ×”×¨×—×‘×” ×”×“×¨×’×ª×™×ª
                  ×œ×¤×™ ×‘×™×§×•×© ×•×©×•×ª×¤×•×™×•×ª ×‘×™×ŸÖ¾××“×™× ×ª×™×•×ª.
                </div>
              </div>
            </div>
          </div>

          <p class="small-note">
            * ××•×“×œ ×”×–××Ÿ ×›××Ÿ ×”×•× ×—×™×©×•×‘ ×¤×™×–×™×§×œ×™ ×¤×©×•×˜ (××¨×—×§ Ã· ××”×™×¨×•×ª + ×¢×¦×™×¨×•×ª).
            ×‘×¢×•×œ× ×”×××™×ª×™ ×™×ª×•×•×¡×¤×• ×ª× ××™ ×™×, ××’×‘×œ×•×ª ×‘×˜×™×—×•×ª ×•×ª×¤×¢×•×œ.
          </p>
        </div>
      </section>
    </main>

    <footer>
      ××¡××š ×§×•× ×¡×¤×˜ ×”× ×“×¡×™-×—×–×•× ×™ â€“ <span>×¨×›×‘×ª ××™× ×¢×œ ×’×–</span> ×”××—×‘×¨×ª ××ª ×”×¢×•×œ× ×“×¨×š ×”×™×.
      × ×™×ª×Ÿ ×œ×©×™××•×© ×›×”×¦×¢×” ×œ××—×§×¨, ×œ×©×™×ª×•×£ ×¤×¢×•×œ×” ×‘×™×Ÿ ××“×™× ×•×ª ××• ×›×‘×¡×™×¡ ×œ×ª×§×™× ×” ×¢×ª×™×“×™×ª.
    </footer>
  </div>

  <script>
    // ×ª×©×ª×™×ª ×›×¤×ª×•×¨×™ ×©×¤×” (×›×¨×’×¢ ×¢×‘×¨×™×ª ×‘×œ×‘×“ ×¤×¢×™×œ×”)
    const langButtons = document.querySelectorAll(".lang-btn");
    langButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        langButtons.forEach(b => b.classList.remove("active-lang"));
        btn.classList.add("active-lang");
        const lang = btn.getAttribute("data-lang");
        if (lang !== "he") {
          alert("×›×¨×’×¢ ×”×ª×•×›×Ÿ ×§×™×™× ×‘×¢×‘×¨×™×ª ×‘×œ×‘×“. × ×™×ª×Ÿ ×œ×”×•×¡×™×£ ×ª×¨×’×•××™× ×‘×× ×’×œ×™×ª/×¢×¨×‘×™×ª ×‘×©×œ×‘ ×”×‘×.");
        }
      });
    });

    let pyodideReadyPromise = (async () => {
      try {
        const pyodide = await loadPyodide();
        const pythonCode = `
def travel_time_str(distance_km, speed_kmh, segments, stop_time_h):
    try:
        distance_km = float(distance_km)
        speed_kmh = float(speed_kmh)
        segments = float(segments)
        stop_time_h = float(stop_time_h)
        if speed_kmh <= 0 or distance_km <= 0 or segments < 0 or stop_time_h < 0:
            return "ERROR"
        travel_hours = distance_km / speed_kmh
        stops_hours = segments * stop_time_h
        total_hours = travel_hours + stops_hours
        days = total_hours / 24.0
        return f"{travel_hours:.1f}|{stops_hours:.1f}|{total_hours:.1f}|{days:.1f}"
    except Exception:
        return "ERROR"
`;
        await pyodide.runPythonAsync(pythonCode);
        return pyodide;
      } catch (e) {
        console.error("Pyodide failed to load:", e);
        return null;
      }
    })();

    function setPresetDistance(value) {
      const distanceInput = document.getElementById("distance");
      distanceInput.value = value;
    }

    async function calculateTravelTime() {
      const resultBox = document.getElementById("calc-result");
      const errorBox = document.getElementById("calc-error");
      errorBox.style.display = "none";

      const distance = Number(document.getElementById("distance").value);
      const speed = Number(document.getElementById("speed").value);
      const segments = Number(document.getElementById("segments").value);
      const stopTime = Number(document.getElementById("stop-time").value);

      if (!distance || !speed || speed <= 0 || distance <= 0 || segments < 0 || stopTime < 0) {
        errorBox.textContent = "×©×’×™××” ×‘×§×œ×˜ â€“ ×‘×“×•×§ ×©×”××¨×—×§, ×”××”×™×¨×•×ª ×•× ×ª×•× ×™ ×”×¢×¦×™×¨×•×ª ×ª×§×™× ×™×.";
        errorBox.style.display = "block";
        resultBox.textContent = "×œ× × ×™×ª×Ÿ ×œ×—×©×‘ â€“ ×§×œ×˜ ×œ× ×ª×§×™×Ÿ.";
        return;
      }

      resultBox.textContent = "××—×©×‘ ×‘×××¦×¢×•×ª Python...";

      const pyodide = await pyodideReadyPromise;
      if (!pyodide) {
        errorBox.textContent = "×œ× ×”×¦×œ×—× ×• ×œ×˜×¢×•×Ÿ ××ª ×× ×•×¢ ×”-Python (Pyodide). ×‘×“×•×§ ×—×™×‘×•×¨ ××™× ×˜×¨× ×˜.";
        errorBox.style.display = "block";
        resultBox.textContent = "×”×—×™×©×•×‘ ××™× ×• ×–××™×Ÿ ×›×¨×’×¢.";
        return;
      }

      try {
        const code = `travel_time_str(${distance}, ${speed}, ${segments}, ${stopTime})`;
        const res = await pyodide.runPythonAsync(code);

        if (!res || res === "ERROR") {
          throw new Error("Python returned ERROR");
        }

        const parts = String(res).split("|");
        if (parts.length !== 4) {
          throw new Error("Unexpected result format");
        }
        const travel = parts[0];
        const stops = parts[1];
        const total = parts[2];
        const days = parts[3];

        resultBox.innerHTML =
          "×–××Ÿ × ×¡×™×¢×” × ×˜×•: <strong>" + travel + " ×©×¢×•×ª</strong><br>" +
          "×–××Ÿ ×¢×¦×™×¨×•×ª ×›×•×œ×œ: <strong>" + stops + " ×©×¢×•×ª</strong><br>" +
          "×¡×”"×› ×–××Ÿ × ×¡×™×¢×”: <strong>" + total + " ×©×¢×•×ª</strong> (~" + days + " ×™××™×)";
      } catch (e) {
        console.error(e);
        errorBox.textContent = "×©×’×™××” ×‘×–××Ÿ ×”×—×™×©×•×‘. ××¤×©×¨ ×œ× ×¡×•×ª ×©×•×‘ ××• ×¢× ×¢×¨×›×™× ××—×¨×™×.";
        errorBox.style.display = "block";
        resultBox.textContent = "×”×—×™×©×•×‘ × ×›×©×œ.";
      }
    }
  </script>
</body>
</html>
